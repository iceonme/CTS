"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/layout",{

/***/ "(app-pages-browser)/./lib/agents/tech-analyst.ts":
/*!************************************!*\
  !*** ./lib/agents/tech-analyst.ts ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TechnicalAnalyst: function() { return /* binding */ TechnicalAnalyst; },\n/* harmony export */   getTechnicalAnalyst: function() { return /* binding */ getTechnicalAnalyst; }\n/* harmony export */ });\n/* harmony import */ var _lib_core_base_agent__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/core/base-agent */ \"(app-pages-browser)/./lib/core/base-agent.ts\");\n/**\n * Technical Analyst - 技术分析员\n * \n * 一个受限的专业 Agent：\n * 1. 低自主性，不能动态发现 Skills\n * 2. 只能回答技术分析相关问题\n * 3. 超出范围时直接拒绝\n * 4. 被动响应，不支持主动任务\n */ \n// ========== 技术分析员配置 ==========\nconst TECH_ANALYST_CONFIG = {\n    identity: {\n        id: \"tech-analyst\",\n        name: \"技术分析员\",\n        role: \"Technical Analyst\",\n        personality: \"严谨、数据驱动、不善言辞\",\n        background: \"专注于技术指标分析，只看图表和数据，不做情绪判断\"\n    },\n    prompts: {\n        system: \"你是技术分析员，只专注于技术指标分析。\\n\\n你的职责：\\n1. 分析 RSI、MACD、均线等技术指标\\n2. 识别图表形态和支撑阻力位\\n3. 基于数据给出客观分析\\n\\n你**不会**：\\n- 讨论基本面或新闻\\n- 给出买入/卖出建议（这是 PA 的职责）\\n- 回答与技术分析无关的问题\",\n        constraints: [\n            \"只回答技术分析相关问题\",\n            \"不提供投资建议\",\n            \"不讨论基本面\",\n            \"超出范围时明确拒绝\"\n        ]\n    },\n    capabilities: {\n        baseSkills: [\n            \"analysis:technical\",\n            \"analysis:rsi\",\n            \"analysis:trend\"\n        ],\n        extendableSkills: [],\n        memoryAccess: {\n            session: true,\n            individual: true,\n            collective: true\n        }\n    },\n    behavior: {\n        autonomy: \"low\",\n        outOfScopeStrategy: \"reject\",\n        proactiveEnabled: false,\n        canUseDynamicSkills: false\n    },\n    isPrimary: false\n};\n// ========== 技术分析员实现 ==========\nclass TechnicalAnalyst extends _lib_core_base_agent__WEBPACK_IMPORTED_MODULE_0__.BaseAgent {\n    /**\n   * 主对话入口\n   */ async chat(message, context) {\n        // 记录用户消息\n        this.memory.session.addMessage(\"user\", message);\n        // 检查是否在范围内\n        const scopeCheck = this.checkScope(message);\n        if (!scopeCheck.inScope) {\n            const response = this.handleOutOfScope(message);\n            this.memory.session.addMessage(\"assistant\", response.content);\n            return response;\n        }\n        // 解析意图\n        const intent = this.parseIntent(message);\n        // 执行分析\n        let response;\n        try {\n            switch(intent.type){\n                case \"rsi\":\n                    response = await this.handleRSIQuery(intent.symbol);\n                    break;\n                case \"trend\":\n                    response = await this.handleTrendQuery(intent.symbol);\n                    break;\n                case \"comprehensive\":\n                    response = await this.handleComprehensiveAnalysis(intent.symbol);\n                    break;\n                default:\n                    response = await this.handleGeneralTechnicalQuery(message);\n            }\n        } catch (error) {\n            response = {\n                content: \"分析失败：\".concat(error instanceof Error ? error.message : \"未知错误\")\n            };\n        }\n        // 记录回复\n        this.memory.session.addMessage(\"assistant\", response.content);\n        // 更新统计\n        this.memory.individual.updateStats({\n            totalAnalyses: this.memory.individual.stats.totalAnalyses + 1\n        });\n        return response;\n    }\n    /**\n   * 覆盖范围检查 - 技术分析员只处理技术相关问题\n   */ checkScope(message) {\n        const technicalKeywords = [\n            \"rsi\",\n            \"macd\",\n            \"均线\",\n            \"ma\",\n            \"趋势\",\n            \"trend\",\n            \"支撑\",\n            \"阻力\",\n            \"分析\",\n            \"technical\",\n            \"指标\",\n            \"indicator\",\n            \"图表\",\n            \"chart\",\n            \"突破\",\n            \"breakout\",\n            \"回调\",\n            \"pullback\",\n            \"超买\",\n            \"oversold\",\n            \"超卖\",\n            \"overbought\",\n            \"金叉\",\n            \"死叉\",\n            \"背离\",\n            \"divergence\"\n        ];\n        const hasTechnicalKeyword = technicalKeywords.some((kw)=>message.toLowerCase().includes(kw.toLowerCase()));\n        if (!hasTechnicalKeyword) {\n            return {\n                inScope: false,\n                reason: \"Message does not contain technical analysis keywords\"\n            };\n        }\n        return {\n            inScope: true\n        };\n    }\n    /**\n   * 解析技术相关的意图\n   */ parseIntent(message) {\n        const lower = message.toLowerCase();\n        const symbol = this.extractSymbol(lower) || \"BTC\";\n        if (/rsi/i.test(lower)) {\n            return {\n                type: \"rsi\",\n                symbol\n            };\n        }\n        if (/趋势|trend|均线|ma/i.test(lower)) {\n            return {\n                type: \"trend\",\n                symbol\n            };\n        }\n        if (/综合|全面|comprehensive|详细/i.test(lower)) {\n            return {\n                type: \"comprehensive\",\n                symbol\n            };\n        }\n        return {\n            type: \"general\",\n            symbol\n        };\n    }\n    /**\n   * 处理 RSI 查询\n   */ async handleRSIQuery(symbol) {\n        var _result_rsi, _result_rsi1;\n        // 执行 RSI 分析 Skill\n        const result = await this.executeSkill(\"analysis:rsi\", {\n            symbol\n        });\n        let content = \"\\uD83D\\uDCCA **\".concat(symbol, \" RSI 分析**\\n\\n\");\n        content += \"当前 RSI: \".concat(((_result_rsi = result.rsi) === null || _result_rsi === void 0 ? void 0 : _result_rsi.toFixed(2)) || \"N/A\", \"\\n\");\n        content += \"状态: \".concat(this.getRSIStatus(result.rsi), \"\\n\\n\");\n        if (result.rsi > 70) {\n            content += \"⚠️ 超买区域，注意回调风险\";\n        } else if (result.rsi < 30) {\n            content += \"⚠️ 超卖区域，可能存在反弹机会\";\n        } else {\n            content += \"✓ 中性区域\";\n        }\n        // 记录到个体记忆\n        this.memory.individual.addExperience({\n            type: \"analysis\",\n            content: \"RSI analysis for \".concat(symbol, \": \").concat((_result_rsi1 = result.rsi) === null || _result_rsi1 === void 0 ? void 0 : _result_rsi1.toFixed(2)),\n            result: \"success\",\n            metadata: {\n                symbol,\n                rsi: result.rsi\n            }\n        });\n        return {\n            content\n        };\n    }\n    /**\n   * 处理趋势查询\n   */ async handleTrendQuery(symbol) {\n        const result = await this.executeSkill(\"analysis:trend\", {\n            symbol\n        });\n        let content = \"\\uD83D\\uDCC8 **\".concat(symbol, \" 趋势分析**\\n\\n\");\n        content += \"短期趋势: \".concat(result.shortTerm || \"N/A\", \"\\n\");\n        content += \"中期趋势: \".concat(result.mediumTerm || \"N/A\", \"\\n\");\n        content += \"长期趋势: \".concat(result.longTerm || \"N/A\", \"\\n\\n\");\n        if (result.keyLevels) {\n            var _result_keyLevels_support, _result_keyLevels_resistance;\n            content += \"关键价位:\\n\";\n            content += \"- 支撑位: $\".concat(((_result_keyLevels_support = result.keyLevels.support) === null || _result_keyLevels_support === void 0 ? void 0 : _result_keyLevels_support.join(\", $\")) || \"N/A\", \"\\n\");\n            content += \"- 阻力位: $\".concat(((_result_keyLevels_resistance = result.keyLevels.resistance) === null || _result_keyLevels_resistance === void 0 ? void 0 : _result_keyLevels_resistance.join(\", $\")) || \"N/A\", \"\\n\");\n        }\n        return {\n            content\n        };\n    }\n    /**\n   * 处理综合分析\n   */ async handleComprehensiveAnalysis(symbol) {\n        var _rsiResult_rsi;\n        // 受限 Agent：只能按顺序执行预设的 Skills，不能动态协调\n        const [rsiResult, trendResult] = await this.executeSkills([\n            {\n                skillId: \"analysis:rsi\",\n                params: {\n                    symbol\n                }\n            },\n            {\n                skillId: \"analysis:trend\",\n                params: {\n                    symbol\n                }\n            }\n        ]);\n        let content = \"\\uD83D\\uDCCA **\".concat(symbol, \" 技术分析报告**\\n\\n\");\n        content += \"【RSI】\\n\";\n        content += \"数值: \".concat(((_rsiResult_rsi = rsiResult.rsi) === null || _rsiResult_rsi === void 0 ? void 0 : _rsiResult_rsi.toFixed(2)) || \"N/A\", \"\\n\");\n        content += \"状态: \".concat(this.getRSIStatus(rsiResult.rsi), \"\\n\\n\");\n        content += \"【趋势】\\n\";\n        content += \"短期: \".concat(trendResult.shortTerm || \"N/A\", \"\\n\");\n        content += \"中期: \".concat(trendResult.mediumTerm || \"N/A\", \"\\n\\n\");\n        content += \"【客观数据】\\n\";\n        content += \"本分析仅供参考，不构成投资建议。\\n\";\n        content += \"如需交易建议，请咨询 PA。\";\n        return {\n            content\n        };\n    }\n    /**\n   * 处理一般技术查询\n   */ async handleGeneralTechnicalQuery(message) {\n        const symbol = this.extractSymbol(message) || \"BTC\";\n        // 默认返回基础技术指标\n        return this.handleComprehensiveAnalysis(symbol);\n    }\n    // ========== 辅助方法 ==========\n    extractSymbol(input) {\n        const match = input.match(/\\b(btc|eth|doge|sol|xrp|ada)\\b/i);\n        return match ? match[0].toUpperCase() : undefined;\n    }\n    getRSIStatus(rsi) {\n        if (rsi > 80) return \"严重超买\";\n        if (rsi > 70) return \"超买\";\n        if (rsi > 60) return \"偏强\";\n        if (rsi > 40) return \"中性\";\n        if (rsi > 30) return \"偏弱\";\n        if (rsi > 20) return \"超卖\";\n        return \"严重超卖\";\n    }\n    constructor(config){\n        const mergedConfig = {\n            ...TECH_ANALYST_CONFIG,\n            ...config,\n            identity: {\n                ...TECH_ANALYST_CONFIG.identity,\n                ...config === null || config === void 0 ? void 0 : config.identity\n            },\n            prompts: {\n                ...TECH_ANALYST_CONFIG.prompts,\n                ...config === null || config === void 0 ? void 0 : config.prompts\n            },\n            capabilities: {\n                ...TECH_ANALYST_CONFIG.capabilities,\n                ...config === null || config === void 0 ? void 0 : config.capabilities\n            },\n            behavior: {\n                ...TECH_ANALYST_CONFIG.behavior,\n                ...config === null || config === void 0 ? void 0 : config.behavior\n            },\n            isPrimary: false\n        };\n        super(mergedConfig);\n    }\n}\n// ========== 单例导出 ==========\nlet techAnalystInstance = null;\nfunction getTechnicalAnalyst(config) {\n    if (!techAnalystInstance) {\n        techAnalystInstance = new TechnicalAnalyst(config);\n    }\n    return techAnalystInstance;\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (TechnicalAnalyst);\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9hZ2VudHMvdGVjaC1hbmFseXN0LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7Ozs7OztDQVFDLEdBRWlEO0FBT2xELGdDQUFnQztBQUVoQyxNQUFNQyxzQkFBbUM7SUFDdkNDLFVBQVU7UUFDUkMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLE1BQU07UUFDTkMsYUFBYTtRQUNiQyxZQUFZO0lBQ2Q7SUFDQUMsU0FBUztRQUNQQyxRQUFTO1FBV1RDLGFBQWE7WUFDWDtZQUNBO1lBQ0E7WUFDQTtTQUNEO0lBQ0g7SUFDQUMsY0FBYztRQUNaQyxZQUFZO1lBQ1Y7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsa0JBQWtCLEVBQUU7UUFDcEJDLGNBQWM7WUFDWkMsU0FBUztZQUNUQyxZQUFZO1lBQ1pDLFlBQVk7UUFDZDtJQUNGO0lBQ0FDLFVBQVU7UUFDUkMsVUFBVTtRQUNWQyxvQkFBb0I7UUFDcEJDLGtCQUFrQjtRQUNsQkMscUJBQXFCO0lBQ3ZCO0lBQ0FDLFdBQVc7QUFDYjtBQUVBLGdDQUFnQztBQUV6QixNQUFNQyx5QkFBeUJ4QiwyREFBU0E7SUFjN0M7O0dBRUMsR0FDRCxNQUFNeUIsS0FBS0MsT0FBZSxFQUFFQyxPQUFxQixFQUF5QjtRQUN4RSxTQUFTO1FBQ1QsSUFBSSxDQUFDQyxNQUFNLENBQUNiLE9BQU8sQ0FBQ2MsVUFBVSxDQUFDLFFBQVFIO1FBRXZDLFdBQVc7UUFDWCxNQUFNSSxhQUFhLElBQUksQ0FBQ0MsVUFBVSxDQUFDTDtRQUNuQyxJQUFJLENBQUNJLFdBQVdFLE9BQU8sRUFBRTtZQUN2QixNQUFNQyxXQUFXLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUNSO1lBQ3ZDLElBQUksQ0FBQ0UsTUFBTSxDQUFDYixPQUFPLENBQUNjLFVBQVUsQ0FBQyxhQUFhSSxTQUFTRSxPQUFPO1lBQzVELE9BQU9GO1FBQ1Q7UUFFQSxPQUFPO1FBQ1AsTUFBTUcsU0FBUyxJQUFJLENBQUNDLFdBQVcsQ0FBQ1g7UUFFaEMsT0FB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LE9BQU87UUFDckIsSUFBSUEsTUFBTSxJQUFJLE9BQU87UUFDckIsSUFBSUEsTUFBTSxJQUFJLE9BQU87UUFDckIsSUFBSUEsTUFBTSxJQUFJLE9BQU87UUFDckIsSUFBSUEsTUFBTSxJQUFJLE9BQU87UUFDckIsT0FBTztJQUNUO0lBeE5BcUIsWUFBWUMsTUFBNkIsQ0FBRTtRQUN6QyxNQUFNQyxlQUE0QjtZQUNoQyxHQUFHbkYsbUJBQW1CO1lBQ3RCLEdBQUdrRixNQUFNO1lBQ1RqRixVQUFVO2dCQUFFLEdBQUdELG9CQUFvQkMsUUFBUTttQkFBS2lGLG1CQUFBQSw2QkFBQUEsT0FBUWpGLFFBQVE7WUFBQztZQUNqRU0sU0FBUztnQkFBRSxHQUFHUCxvQkFBb0JPLE9BQU87bUJBQUsyRSxtQkFBQUEsNkJBQUFBLE9BQVEzRSxPQUFPO1lBQUM7WUFDOURHLGNBQWM7Z0JBQUUsR0FBR1Ysb0JBQW9CVSxZQUFZO21CQUFLd0UsbUJBQUFBLDZCQUFBQSxPQUFReEUsWUFBWTtZQUFDO1lBQzdFTyxVQUFVO2dCQUFFLEdBQUdqQixvQkFBb0JpQixRQUFRO21CQUFLaUUsbUJBQUFBLDZCQUFBQSxPQUFRakUsUUFBUTtZQUFDO1lBQ2pFSyxXQUFXO1FBQ2I7UUFDQSxLQUFLLENBQUM2RDtJQUNSO0FBOE1GO0FBRUEsNkJBQTZCO0FBRTdCLElBQUlDLHNCQUErQztBQUU1QyxTQUFTQyxvQkFBb0JILE1BQTZCO0lBQy9ELElBQUksQ0FBQ0UscUJBQXFCO1FBQ3hCQSxzQkFBc0IsSUFBSTdELGlCQUFpQjJEO0lBQzdDO0lBQ0EsT0FBT0U7QUFDVDtBQUVBLCtEQUFlN0QsZ0JBQWdCQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2xpYi9hZ2VudHMvdGVjaC1hbmFseXN0LnRzPzM1ZDEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZWNobmljYWwgQW5hbHlzdCAtIOaKgOacr+WIhuaekOWRmFxuICogXG4gKiDkuIDkuKrlj5fpmZDnmoTkuJPkuJogQWdlbnTvvJpcbiAqIDEuIOS9juiHquS4u+aAp++8jOS4jeiDveWKqOaAgeWPkeeOsCBTa2lsbHNcbiAqIDIuIOWPquiDveWbnuetlOaKgOacr+WIhuaekOebuOWFs+mXrumimFxuICogMy4g6LaF5Ye66IyD5Zu05pe255u05o6l5ouS57udXG4gKiA0LiDooqvliqjlk43lupTvvIzkuI3mlK/mjIHkuLvliqjku7vliqFcbiAqL1xuXG5pbXBvcnQgeyBCYXNlQWdlbnQgfSBmcm9tICdAL2xpYi9jb3JlL2Jhc2UtYWdlbnQnO1xuaW1wb3J0IHR5cGUge1xuICBBZ2VudENvbmZpZyxcbiAgQ2hhdENvbnRleHQsXG4gIENoYXRSZXNwb25zZSxcbn0gZnJvbSAnQC9saWIvY29yZS90eXBlcyc7XG5cbi8vID09PT09PT09PT0g5oqA5pyv5YiG5p6Q5ZGY6YWN572uID09PT09PT09PT1cblxuY29uc3QgVEVDSF9BTkFMWVNUX0NPTkZJRzogQWdlbnRDb25maWcgPSB7XG4gIGlkZW50aXR5OiB7XG4gICAgaWQ6ICd0ZWNoLWFuYWx5c3QnLFxuICAgIG5hbWU6ICfmioDmnK/liIbmnpDlkZgnLFxuICAgIHJvbGU6ICdUZWNobmljYWwgQW5hbHlzdCcsXG4gICAgcGVyc29uYWxpdHk6ICfkuKXosKjjgIHmlbDmja7pqbHliqjjgIHkuI3lloToqIDovp4nLFxuICAgIGJhY2tncm91bmQ6ICfkuJPms6jkuo7mioDmnK/mjIfmoIfliIbmnpDvvIzlj6rnnIvlm77ooajlkozmlbDmja7vvIzkuI3lgZrmg4Xnu6rliKTmlq0nLFxuICB9LFxuICBwcm9tcHRzOiB7XG4gICAgc3lzdGVtOiBg5L2g5piv5oqA5pyv5YiG5p6Q5ZGY77yM5Y+q5LiT5rOo5LqO5oqA5pyv5oyH5qCH5YiG5p6Q44CCXG5cbuS9oOeahOiBjOi0o++8mlxuMS4g5YiG5p6QIFJTSeOAgU1BQ0TjgIHlnYfnur/nrYnmioDmnK/mjIfmoIdcbjIuIOivhuWIq+WbvuihqOW9ouaAgeWSjOaUr+aSkemYu+WKm+S9jVxuMy4g5Z+65LqO5pWw5o2u57uZ5Ye65a6i6KeC5YiG5p6QXG5cbuS9oCoq5LiN5LyaKirvvJpcbi0g6K6o6K665Z+65pys6Z2i5oiW5paw6Ze7XG4tIOe7meWHuuS5sOWFpS/ljZblh7rlu7rorq7vvIjov5nmmK8gUEEg55qE6IGM6LSj77yJXG4tIOWbnuetlOS4juaKgOacr+WIhuaekOaXoOWFs+eahOmXrumimGAsXG4gICAgY29uc3RyYWludHM6IFtcbiAgICAgICflj6rlm57nrZTmioDmnK/liIbmnpDnm7jlhbPpl67popgnLFxuICAgICAgJ+S4jeaPkOS+m+aKlei1hOW7uuiuricsXG4gICAgICAn5LiN6K6o6K665Z+65pys6Z2iJyxcbiAgICAgICfotoXlh7rojIPlm7Tml7bmmI7noa7mi5Lnu50nLFxuICAgIF0sXG4gIH0sXG4gIGNhcGFiaWxpdGllczoge1xuICAgIGJhc2VTa2lsbHM6IFtcbiAgICAgICdhbmFseXNpczp0ZWNobmljYWwnLCAgICAvLyDmt7HluqbmioDmnK/liIbmnpBcbiAgICAgICdhbmFseXNpczpyc2knLCAgICAgICAgICAvLyBSU0kg5oyH5qCHXG4gICAgICAnYW5hbHlzaXM6dHJlbmQnLCAgICAgICAgLy8g6LaL5Yq/5YiG5p6QXG4gICAgXSxcbiAgICBleHRlbmRhYmxlU2tpbGxzOiBbXSwgICAgICAvLyDkuI3og73liqjmgIHmt7vliqAgU2tpbGxzXG4gICAgbWVtb3J5QWNjZXNzOiB7XG4gICAgICBzZXNzaW9uOiB0cnVlLFxuICAgICAgaW5kaXZpZHVhbDogdHJ1ZSxcbiAgICAgIGNvbGxlY3RpdmU6IHRydWUsICAgICAgICAvLyDlj6/ku6Xor7vlj5bpm4bkvZPorrDlv4bkuK3nmoTmioDmnK/kv6Hlj7dcbiAgICB9LFxuICB9LFxuICBiZWhhdmlvcjoge1xuICAgIGF1dG9ub215OiAnbG93JywgICAgICAgICAgIC8vIOS9juiHquS4u+aAp1xuICAgIG91dE9mU2NvcGVTdHJhdGVneTogJ3JlamVjdCcsICAvLyDotoXlh7rojIPlm7Tnm7TmjqXmi5Lnu51cbiAgICBwcm9hY3RpdmVFbmFibGVkOiBmYWxzZSwgICAvLyDkuI3mlK/mjIHkuLvliqjku7vliqFcbiAgICBjYW5Vc2VEeW5hbWljU2tpbGxzOiBmYWxzZSxcbiAgfSxcbiAgaXNQcmltYXJ5OiBmYWxzZSxcbn07XG5cbi8vID09PT09PT09PT0g5oqA5pyv5YiG5p6Q5ZGY5a6e546wID09PT09PT09PT1cblxuZXhwb3J0IGNsYXNzIFRlY2huaWNhbEFuYWx5c3QgZXh0ZW5kcyBCYXNlQWdlbnQge1xuICBjb25zdHJ1Y3Rvcihjb25maWc/OiBQYXJ0aWFsPEFnZW50Q29uZmlnPikge1xuICAgIGNvbnN0IG1lcmdlZENvbmZpZzogQWdlbnRDb25maWcgPSB7XG4gICAgICAuLi5URUNIX0FOQUxZU1RfQ09ORklHLFxuICAgICAgLi4uY29uZmlnLFxuICAgICAgaWRlbnRpdHk6IHsgLi4uVEVDSF9BTkFMWVNUX0NPTkZJRy5pZGVudGl0eSwgLi4uY29uZmlnPy5pZGVudGl0eSB9LFxuICAgICAgcHJvbXB0czogeyAuLi5URUNIX0FOQUxZU1RfQ09ORklHLnByb21wdHMsIC4uLmNvbmZpZz8ucHJvbXB0cyB9LFxuICAgICAgY2FwYWJpbGl0aWVzOiB7IC4uLlRFQ0hfQU5BTFlTVF9DT05GSUcuY2FwYWJpbGl0aWVzLCAuLi5jb25maWc/LmNhcGFiaWxpdGllcyB9LFxuICAgICAgYmVoYXZpb3I6IHsgLi4uVEVDSF9BTkFMWVNUX0NPTkZJRy5iZWhhdmlvciwgLi4uY29uZmlnPy5iZWhhdmlvciB9LFxuICAgICAgaXNQcmltYXJ5OiBmYWxzZSxcbiAgICB9O1xuICAgIHN1cGVyKG1lcmdlZENvbmZpZyk7XG4gIH1cblxuICAvKipcbiAgICog5Li75a+56K+d5YWl5Y+jXG4gICAqL1xuICBhc3luYyBjaGF0KG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IENoYXRDb250ZXh0KTogUHJvbWlzZTxDaGF0UmVzcG9uc2U+IHtcbiAgICAvLyDorrDlvZXnlKjmiLfmtojmga9cbiAgICB0aGlzLm1lbW9yeS5zZXNzaW9uLmFkZE1lc3NhZ2UoJ3VzZXInLCBtZXNzYWdlKTtcblxuICAgIC8vIOajgOafpeaYr+WQpuWcqOiMg+WbtOWGhVxuICAgIGNvbnN0IHNjb3BlQ2hlY2sgPSB0aGlzLmNoZWNrU2NvcGUobWVzc2FnZSk7XG4gICAgaWYgKCFzY29wZUNoZWNrLmluU2NvcGUpIHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gdGhpcy5oYW5kbGVPdXRPZlNjb3BlKG1lc3NhZ2UpO1xuICAgICAgdGhpcy5tZW1vcnkuc2Vzc2lvbi5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCByZXNwb25zZS5jb250ZW50KTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICAvLyDop6PmnpDmhI/lm75cbiAgICBjb25zdCBpbnRlbnQgPSB0aGlzLnBhcnNlSW50ZW50KG1lc3NhZ2UpO1xuXG4gICAgLy8g5omn6KGM5YiG5p6QXG4gICAgbGV0IHJlc3BvbnNlOiBDaGF0UmVzcG9uc2U7XG4gICAgdHJ5IHtcbiAgICAgIHN3aXRjaCAoaW50ZW50LnR5cGUpIHtcbiAgICAgICAgY2FzZSAncnNpJzpcbiAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuaGFuZGxlUlNJUXVlcnkoaW50ZW50LnN5bWJvbCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3RyZW5kJzpcbiAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuaGFuZGxlVHJlbmRRdWVyeShpbnRlbnQuc3ltYm9sKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnY29tcHJlaGVuc2l2ZSc6XG4gICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmhhbmRsZUNvbXByZWhlbnNpdmVBbmFseXNpcyhpbnRlbnQuc3ltYm9sKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuaGFuZGxlR2VuZXJhbFRlY2huaWNhbFF1ZXJ5KG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgY29udGVudDogYOWIhuaekOWksei0pe+8miR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn5pyq55+l6ZSZ6K+vJ31gLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyDorrDlvZXlm57lpI1cbiAgICB0aGlzLm1lbW9yeS5zZXNzaW9uLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIHJlc3BvbnNlLmNvbnRlbnQpO1xuXG4gICAgLy8g5pu05paw57uf6K6hXG4gICAgdGhpcy5tZW1vcnkuaW5kaXZpZHVhbC51cGRhdGVTdGF0cyh7XG4gICAgICB0b3RhbEFuYWx5c2VzOiB0aGlzLm1lbW9yeS5pbmRpdmlkdWFsLnN0YXRzLnRvdGFsQW5hbHlzZXMgKyAxLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cbiAgLyoqXG4gICAqIOimhuebluiMg+WbtOajgOafpSAtIOaKgOacr+WIhuaekOWRmOWPquWkhOeQhuaKgOacr+ebuOWFs+mXrumimFxuICAgKi9cbiAgcHJvdGVjdGVkIGNoZWNrU2NvcGUobWVzc2FnZTogc3RyaW5nKTogeyBpblNjb3BlOiBib29sZWFuOyByZWFzb24/OiBzdHJpbmcgfSB7XG4gICAgY29uc3QgdGVjaG5pY2FsS2V5d29yZHMgPSBbXG4gICAgICAncnNpJywgJ21hY2QnLCAn5Z2H57q/JywgJ21hJywgJ+i2i+WKvycsICd0cmVuZCcsICfmlK/mkpEnLCAn6Zi75YqbJywgXG4gICAgICAn5YiG5p6QJywgJ3RlY2huaWNhbCcsICfmjIfmoIcnLCAnaW5kaWNhdG9yJywgJ+WbvuihqCcsICdjaGFydCcsXG4gICAgICAn56qB56C0JywgJ2JyZWFrb3V0JywgJ+WbnuiwgycsICdwdWxsYmFjaycsICfotoXkubAnLCAnb3ZlcnNvbGQnLFxuICAgICAgJ+i2heWNlicsICdvdmVyYm91Z2h0JywgJ+mHkeWPiScsICfmrbvlj4knLCAn6IOM56a7JywgJ2RpdmVyZ2VuY2UnXG4gICAgXTtcbiAgICBcbiAgICBjb25zdCBoYXNUZWNobmljYWxLZXl3b3JkID0gdGVjaG5pY2FsS2V5d29yZHMuc29tZShrdyA9PiBcbiAgICAgIG1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhrdy50b0xvd2VyQ2FzZSgpKVxuICAgICk7XG5cbiAgICBpZiAoIWhhc1RlY2huaWNhbEtleXdvcmQpIHtcbiAgICAgIHJldHVybiB7IFxuICAgICAgICBpblNjb3BlOiBmYWxzZSwgXG4gICAgICAgIHJlYXNvbjogJ01lc3NhZ2UgZG9lcyBub3QgY29udGFpbiB0ZWNobmljYWwgYW5hbHlzaXMga2V5d29yZHMnIFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBpblNjb3BlOiB0cnVlIH07XG4gIH1cblxuICAvKipcbiAgICog6Kej5p6Q5oqA5pyv55u45YWz55qE5oSP5Zu+XG4gICAqL1xuICBwcml2YXRlIHBhcnNlSW50ZW50KG1lc3NhZ2U6IHN0cmluZyk6IHtcbiAgICB0eXBlOiAncnNpJyB8ICd0cmVuZCcgfCAnY29tcHJlaGVuc2l2ZScgfCAnZ2VuZXJhbCc7XG4gICAgc3ltYm9sPzogc3RyaW5nO1xuICB9IHtcbiAgICBjb25zdCBsb3dlciA9IG1lc3NhZ2UudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBzeW1ib2wgPSB0aGlzLmV4dHJhY3RTeW1ib2wobG93ZXIpIHx8ICdCVEMnO1xuXG4gICAgaWYgKC9yc2kvaS50ZXN0KGxvd2VyKSkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogJ3JzaScsIHN5bWJvbCB9O1xuICAgIH1cblxuICAgIGlmICgv6LaL5Yq/fHRyZW5kfOWdh+e6v3xtYS9pLnRlc3QobG93ZXIpKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiAndHJlbmQnLCBzeW1ib2wgfTtcbiAgICB9XG5cbiAgICBpZiAoL+e7vOWQiHzlhajpnaJ8Y29tcHJlaGVuc2l2ZXzor6bnu4YvaS50ZXN0KGxvd2VyKSkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogJ2NvbXByZWhlbnNpdmUnLCBzeW1ib2wgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyB0eXBlOiAnZ2VuZXJhbCcsIHN5bWJvbCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhiBSU0kg5p+l6K+iXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGhhbmRsZVJTSVF1ZXJ5KHN5bWJvbDogc3RyaW5nKTogUHJvbWlzZTxDaGF0UmVzcG9uc2U+IHtcbiAgICAvLyDmiafooYwgUlNJIOWIhuaekCBTa2lsbFxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZVNraWxsKCdhbmFseXNpczpyc2knLCB7IHN5bWJvbCB9KTtcblxuICAgIGxldCBjb250ZW50ID0gYPCfk4ogKioke3N5bWJvbH0gUlNJIOWIhuaekCoqXFxuXFxuYDtcbiAgICBjb250ZW50ICs9IGDlvZPliY0gUlNJOiAke3Jlc3VsdC5yc2k/LnRvRml4ZWQoMikgfHwgJ04vQSd9XFxuYDtcbiAgICBjb250ZW50ICs9IGDnirbmgIE6ICR7dGhpcy5nZXRSU0lTdGF0dXMocmVzdWx0LnJzaSl9XFxuXFxuYDtcbiAgICBcbiAgICBpZiAocmVzdWx0LnJzaSA+IDcwKSB7XG4gICAgICBjb250ZW50ICs9IGDimqDvuI8g6LaF5Lmw5Yy65Z+f77yM5rOo5oSP5Zue6LCD6aOO6ZmpYDtcbiAgICB9IGVsc2UgaWYgKHJlc3VsdC5yc2kgPCAzMCkge1xuICAgICAgY29udGVudCArPSBg4pqg77iPIOi2heWNluWMuuWfn++8jOWPr+iDveWtmOWcqOWPjeW8ueacuuS8mmA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRlbnQgKz0gYOKckyDkuK3mgKfljLrln59gO1xuICAgIH1cblxuICAgIC8vIOiusOW9leWIsOS4quS9k+iusOW/hlxuICAgIHRoaXMubWVtb3J5LmluZGl2aWR1YWwuYWRkRXhwZXJpZW5jZSh7XG4gICAgICB0eXBlOiAnYW5hbHlzaXMnLFxuICAgICAgY29udGVudDogYFJTSSBhbmFseXNpcyBmb3IgJHtzeW1ib2x9OiAke3Jlc3VsdC5yc2k/LnRvRml4ZWQoMil9YCxcbiAgICAgIHJlc3VsdDogJ3N1Y2Nlc3MnLFxuICAgICAgbWV0YWRhdGE6IHsgc3ltYm9sLCByc2k6IHJlc3VsdC5yc2kgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiB7IGNvbnRlbnQgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbotovlir/mn6Xor6JcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlVHJlbmRRdWVyeShzeW1ib2w6IHN0cmluZyk6IFByb21pc2U8Q2hhdFJlc3BvbnNlPiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlU2tpbGwoJ2FuYWx5c2lzOnRyZW5kJywgeyBzeW1ib2wgfSk7XG5cbiAgICBsZXQgY29udGVudCA9IGDwn5OIICoqJHtzeW1ib2x9IOi2i+WKv+WIhuaekCoqXFxuXFxuYDtcbiAgICBjb250ZW50ICs9IGDnn63mnJ/otovlir86ICR7cmVzdWx0LnNob3J0VGVybSB8fCAnTi9BJ31cXG5gO1xuICAgIGNvbnRlbnQgKz0gYOS4reacn+i2i+WKvzogJHtyZXN1bHQubWVkaXVtVGVybSB8fCAnTi9BJ31cXG5gO1xuICAgIGNvbnRlbnQgKz0gYOmVv+acn+i2i+WKvzogJHtyZXN1bHQubG9uZ1Rlcm0gfHwgJ04vQSd9XFxuXFxuYDtcbiAgICBcbiAgICBpZiAocmVzdWx0LmtleUxldmVscykge1xuICAgICAgY29udGVudCArPSBg5YWz6ZSu5Lu35L2NOlxcbmA7XG4gICAgICBjb250ZW50ICs9IGAtIOaUr+aSkeS9jTogJCR7cmVzdWx0LmtleUxldmVscy5zdXBwb3J0Py5qb2luKCcsICQnKSB8fCAnTi9BJ31cXG5gO1xuICAgICAgY29udGVudCArPSBgLSDpmLvlipvkvY06ICQke3Jlc3VsdC5rZXlMZXZlbHMucmVzaXN0YW5jZT8uam9pbignLCAkJykgfHwgJ04vQSd9XFxuYDtcbiAgICB9XG5cbiAgICByZXR1cm4geyBjb250ZW50IH07XG4gIH1cblxuICAvKipcbiAgICog5aSE55CG57u85ZCI5YiG5p6QXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGhhbmRsZUNvbXByZWhlbnNpdmVBbmFseXNpcyhzeW1ib2w6IHN0cmluZyk6IFByb21pc2U8Q2hhdFJlc3BvbnNlPiB7XG4gICAgLy8g5Y+X6ZmQIEFnZW5077ya5Y+q6IO95oyJ6aG65bqP5omn6KGM6aKE6K6+55qEIFNraWxsc++8jOS4jeiDveWKqOaAgeWNj+iwg1xuICAgIGNvbnN0IFtyc2lSZXN1bHQsIHRyZW5kUmVzdWx0XSA9IGF3YWl0IHRoaXMuZXhlY3V0ZVNraWxscyhbXG4gICAgICB7IHNraWxsSWQ6ICdhbmFseXNpczpyc2knLCBwYXJhbXM6IHsgc3ltYm9sIH0gfSxcbiAgICAgIHsgc2tpbGxJZDogJ2FuYWx5c2lzOnRyZW5kJywgcGFyYW1zOiB7IHN5bWJvbCB9IH0sXG4gICAgXSk7XG5cbiAgICBsZXQgY29udGVudCA9IGDwn5OKICoqJHtzeW1ib2x9IOaKgOacr+WIhuaekOaKpeWRiioqXFxuXFxuYDtcbiAgICBcbiAgICBjb250ZW50ICs9IGDjgJBSU0njgJFcXG5gO1xuICAgIGNvbnRlbnQgKz0gYOaVsOWAvDogJHtyc2lSZXN1bHQucnNpPy50b0ZpeGVkKDIpIHx8ICdOL0EnfVxcbmA7XG4gICAgY29udGVudCArPSBg54q25oCBOiAke3RoaXMuZ2V0UlNJU3RhdHVzKHJzaVJlc3VsdC5yc2kpfVxcblxcbmA7XG4gICAgXG4gICAgY29udGVudCArPSBg44CQ6LaL5Yq/44CRXFxuYDtcbiAgICBjb250ZW50ICs9IGDnn63mnJ86ICR7dHJlbmRSZXN1bHQuc2hvcnRUZXJtIHx8ICdOL0EnfVxcbmA7XG4gICAgY29udGVudCArPSBg5Lit5pyfOiAke3RyZW5kUmVzdWx0Lm1lZGl1bVRlcm0gfHwgJ04vQSd9XFxuXFxuYDtcbiAgICBcbiAgICBjb250ZW50ICs9IGDjgJDlrqLop4LmlbDmja7jgJFcXG5gO1xuICAgIGNvbnRlbnQgKz0gYOacrOWIhuaekOS7heS+m+WPguiAg++8jOS4jeaehOaIkOaKlei1hOW7uuiuruOAglxcbmA7XG4gICAgY29udGVudCArPSBg5aaC6ZyA5Lqk5piT5bu66K6u77yM6K+35ZKo6K+iIFBB44CCYDtcblxuICAgIHJldHVybiB7IGNvbnRlbnQgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiDlpITnkIbkuIDoiKzmioDmnK/mn6Xor6JcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlR2VuZXJhbFRlY2huaWNhbFF1ZXJ5KG1lc3NhZ2U6IHN0cmluZyk6IFByb21pc2U8Q2hhdFJlc3BvbnNlPiB7XG4gICAgY29uc3Qgc3ltYm9sID0gdGhpcy5leHRyYWN0U3ltYm9sKG1lc3NhZ2UpIHx8ICdCVEMnO1xuICAgIFxuICAgIC8vIOm7mOiupOi/lOWbnuWfuuehgOaKgOacr+aMh+agh1xuICAgIHJldHVybiB0aGlzLmhhbmRsZUNvbXByZWhlbnNpdmVBbmFseXNpcyhzeW1ib2wpO1xuICB9XG5cbiAgLy8gPT09PT09PT09PSDovoXliqnmlrnms5UgPT09PT09PT09PVxuXG4gIHByaXZhdGUgZXh0cmFjdFN5bWJvbChpbnB1dDogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBtYXRjaCA9IGlucHV0Lm1hdGNoKC9cXGIoYnRjfGV0aHxkb2dlfHNvbHx4cnB8YWRhKVxcYi9pKTtcbiAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFswXS50b1VwcGVyQ2FzZSgpIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRSU0lTdGF0dXMocnNpOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmIChyc2kgPiA4MCkgcmV0dXJuICfkuKXph43otoXkubAnO1xuICAgIGlmIChyc2kgPiA3MCkgcmV0dXJuICfotoXkubAnO1xuICAgIGlmIChyc2kgPiA2MCkgcmV0dXJuICflgY/lvLonO1xuICAgIGlmIChyc2kgPiA0MCkgcmV0dXJuICfkuK3mgKcnO1xuICAgIGlmIChyc2kgPiAzMCkgcmV0dXJuICflgY/lvLEnO1xuICAgIGlmIChyc2kgPiAyMCkgcmV0dXJuICfotoXljZYnO1xuICAgIHJldHVybiAn5Lil6YeN6LaF5Y2WJztcbiAgfVxufVxuXG4vLyA9PT09PT09PT09IOWNleS+i+WvvOWHuiA9PT09PT09PT09XG5cbmxldCB0ZWNoQW5hbHlzdEluc3RhbmNlOiBUZWNobmljYWxBbmFseXN0IHwgbnVsbCA9IG51bGw7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZWNobmljYWxBbmFseXN0KGNvbmZpZz86IFBhcnRpYWw8QWdlbnRDb25maWc+KTogVGVjaG5pY2FsQW5hbHlzdCB7XG4gIGlmICghdGVjaEFuYWx5c3RJbnN0YW5jZSkge1xuICAgIHRlY2hBbmFseXN0SW5zdGFuY2UgPSBuZXcgVGVjaG5pY2FsQW5hbHlzdChjb25maWcpO1xuICB9XG4gIHJldHVybiB0ZWNoQW5hbHlzdEluc3RhbmNlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBUZWNobmljYWxBbmFseXN0O1xuIl0sIm5hbWVzIjpbIkJhc2VBZ2VudCIsIlRFQ0hfQU5BTFlTVF9DT05GSUciLCJpZGVudGl0eSIsImlkIiwibmFtZSIsInJvbGUiLCJwZXJzb25hbGl0eSIsImJhY2tncm91bmQiLCJwcm9tcHRzIiwic3lzdGVtIiwiY29uc3RyYWludHMiLCJjYXBhYmlsaXRpZXMiLCJiYXNlU2tpbGxzIiwiZXh0ZW5kYWJsZVNraWxscyIsIm1lbW9yeUFjY2VzcyIsInNlc3Npb24iLCJpbmRpdmlkdWFsIiwiY29sbGVjdGl2ZSIsImJlaGF2aW9yIiwiYXV0b25vbXkiLCJvdXRPZlNjb3BlU3RyYXRlZ3kiLCJwcm9hY3RpdmVFbmFibGVkIiwiY2FuVXNlRHluYW1pY1NraWxscyIsImlzUHJpbWFyeSIsIlRlY2huaWNhbEFuYWx5c3QiLCJjaGF0IiwibWVzc2FnZSIsImNvbnRleHQiLCJtZW1vcnkiLCJhZGRNZXNzYWdlIiwic2NvcGVDaGVjayIsImNoZWNrU2NvcGUiLCJpblNjb3BlIiwicmVzcG9uc2UiLCJoYW5kbGVPdXRPZlNjb3BlIiwiY29udGVudCIsImludGVudCIsInBhcnNlSW50ZW50IiwidHlwZSIsImhhbmRsZVJTSVF1ZXJ5Iiwic3ltYm9sIiwiaGFuZGxlVHJlbmRRdWVyeSIsImhhbmRsZUNvbXByZWhlbnNpdmVBbmFseXNpcyIsImhhbmRsZUdlbmVyYWxUZWNobmljYWxRdWVyeSIsImVycm9yIiwiRXJyb3IiLCJ1cGRhdGVTdGF0cyIsInRvdGFsQW5hbHlzZXMiLCJzdGF0cyIsInRlY2huaWNhbEtleXdvcmRzIiwiaGFzVGVjaG5pY2FsS2V5d29yZCIsInNvbWUiLCJrdyIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJyZWFzb24iLCJsb3dlciIsImV4dHJhY3RTeW1ib2wiLCJ0ZXN0IiwicmVzdWx0IiwiZXhlY3V0ZVNraWxsIiwicnNpIiwidG9GaXhlZCIsImdldFJTSVN0YXR1cyIsImFkZEV4cGVyaWVuY2UiLCJtZXRhZGF0YSIsInNob3J0VGVybSIsIm1lZGl1bVRlcm0iLCJsb25nVGVybSIsImtleUxldmVscyIsInN1cHBvcnQiLCJqb2luIiwicmVzaXN0YW5jZSIsInJzaVJlc3VsdCIsInRyZW5kUmVzdWx0IiwiZXhlY3V0ZVNraWxscyIsInNraWxsSWQiLCJwYXJhbXMiLCJpbnB1dCIsIm1hdGNoIiwidG9VcHBlckNhc2UiLCJ1bmRlZmluZWQiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsIm1lcmdlZENvbmZpZyIsInRlY2hBbmFseXN0SW5zdGFuY2UiLCJnZXRUZWNobmljYWxBbmFseXN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/agents/tech-analyst.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./lib/core/base-agent.ts":
/*!********************************!*\
  !*** ./lib/core/base-agent.ts ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseAgent: function() { return /* binding */ BaseAgent; },\n/* harmony export */   SkillRegistry: function() { return /* binding */ SkillRegistry; }\n/* harmony export */ });\n/**\n * TradeMind Framework - BaseAgent\n * \n * 所有 Agent 的抽象基类\n * \n * 核心设计：\n * 1. 每个 Agent 有预制 Skills（不能减少，可增加）\n * 2. 三层记忆：会话/个体/集体\n * 3. 自主性可配置：PA 高自主性，其他 Agent 可限制\n * 4. PA 有特殊标记 isPrimary 和独特能力\n */ // ========== 记忆系统实现 ==========\nclass SessionMemoryImpl {\n    addMessage(role, content) {\n        this.messages.push({\n            role,\n            content,\n            timestamp: Date.now()\n        });\n    }\n    getRecent(limit) {\n        return this.messages.slice(-limit);\n    }\n    clear() {\n        this.messages = [];\n        this.context = {};\n    }\n    constructor(){\n        this.messages = [];\n        this.context = {};\n    }\n}\nclass IndividualMemoryImpl {\n    addExperience(experience) {\n        this.experiences.push({\n            ...experience,\n            timestamp: Date.now()\n        });\n        this.stats.lastActiveAt = Date.now();\n    }\n    updateStats(update) {\n        this.stats = {\n            ...this.stats,\n            ...update,\n            lastActiveAt: Date.now()\n        };\n    }\n    getExperiences(filter) {\n        let result = this.experiences;\n        if (filter === null || filter === void 0 ? void 0 : filter.type) {\n            result = result.filter((e)=>e.type === filter.type);\n        }\n        if (filter === null || filter === void 0 ? void 0 : filter.limit) {\n            result = result.slice(-filter.limit);\n        }\n        return result;\n    }\n    constructor(){\n        this.stats = {\n            totalAnalyses: 0,\n            totalTrades: 0,\n            accuracyRate: 0,\n            lastActiveAt: Date.now()\n        };\n        this.experiences = [];\n        this.userPreferences = {};\n    }\n}\nclass CollectiveMemoryImpl {\n    addFact(fact) {\n        this.marketFacts.push({\n            ...fact,\n            timestamp: Date.now()\n        });\n        // 清理过期事实\n        const now = Date.now();\n        this.marketFacts = this.marketFacts.filter((f)=>!f.expiresAt || f.expiresAt > now);\n    }\n    addInsight(agentId, insight) {\n        if (!this.agentInsights[agentId]) {\n            this.agentInsights[agentId] = [];\n        }\n        this.agentInsights[agentId].push({\n            content: insight,\n            timestamp: Date.now()\n        });\n    }\n    addLesson(lesson) {\n        this.lessons.push({\n            ...lesson,\n            timestamp: Date.now()\n        });\n    }\n    queryFacts(filter) {\n        let result = this.marketFacts;\n        if (filter.type) {\n            result = result.filter((f)=>f.type === filter.type);\n        }\n        if (filter.since) {\n            result = result.filter((f)=>f.timestamp >= filter.since);\n        }\n        return result.sort((a, b)=>b.timestamp - a.timestamp);\n    }\n    constructor(){\n        this.marketFacts = [];\n        this.agentInsights = {};\n        this.lessons = [];\n    }\n}\n// ========== 全局 Skill 注册表 ==========\nclass SkillRegistry {\n    static register(skill) {\n        this.skills.set(skill.id, skill);\n    }\n    static get(skillId) {\n        return this.skills.get(skillId);\n    }\n    static list() {\n        return Array.from(this.skills.values());\n    }\n    static findByPrefix(prefix) {\n        return this.list().filter((s)=>s.id.startsWith(prefix));\n    }\n}\nSkillRegistry.skills = new Map();\n// ========== BaseAgent 抽象类 ==========\nclass BaseAgent {\n    // ========== 身份与配置 ==========\n    get identity() {\n        return this.config.identity;\n    }\n    get isPrimary() {\n        var _this_config_isPrimary;\n        return (_this_config_isPrimary = this.config.isPrimary) !== null && _this_config_isPrimary !== void 0 ? _this_config_isPrimary : false;\n    }\n    get autonomy() {\n        return this.config.behavior.autonomy;\n    }\n    // ========== Skill 管理 ==========\n    /**\n   * 获取所有可用的 Skill IDs\n   */ getAvailableSkills() {\n        return [\n            ...this.baseSkills,\n            ...this.extendedSkills\n        ];\n    }\n    /**\n   * 检查是否有某个 Skill\n   */ hasSkill(skillId) {\n        return this.baseSkills.has(skillId) || this.extendedSkills.has(skillId);\n    }\n    /**\n   * 动态添加 Skill（不能减少预制 Skills）\n   */ addSkill(skillId) {\n        // 检查 Skill 是否存在于全局注册表\n        const skill = SkillRegistry.get(skillId);\n        if (!skill) {\n            console.warn(\"Skill \".concat(skillId, \" not found in registry\"));\n            return false;\n        }\n        // 检查是否在允许扩展的列表中\n        if (!this.config.capabilities.extendableSkills.includes(skillId)) {\n            console.warn(\"Skill \".concat(skillId, \" not in extendable list for \").concat(this.identity.id));\n            return false;\n        }\n        this.extendedSkills.add(skillId);\n        return true;\n    }\n    /**\n   * 动态发现可用的 Skills（高自主性 Agent 可用）\n   */ discoverSkills(intent) {\n        if (this.autonomy === \"low\") {\n            return []; // 低自主性 Agent 不能动态发现\n        }\n        // 简单的关键词匹配，实际可以用 LLM 来做意图匹配\n        const allSkills = SkillRegistry.list();\n        return allSkills.filter((skill)=>skill.description.toLowerCase().includes(intent.toLowerCase()) || skill.name.toLowerCase().includes(intent.toLowerCase()));\n    }\n    /**\n   * 检查消息是否在当前 Agent 的能力范围内\n   */ checkScope(message) {\n        // 子类可以覆盖此方法来实现更精确的域检查\n        // 默认实现：PA 总是返回 true，其他 Agent 依赖配置\n        if (this.isPrimary) {\n            return {\n                inScope: true\n            };\n        }\n        // 非 PA Agent：检查是否有匹配的 Skill\n        const availableSkills = this.getAvailableSkills();\n        if (availableSkills.length === 0) {\n            return {\n                inScope: false,\n                reason: \"No skills available\"\n            };\n        }\n        // 简单启发式：检查消息是否包含 skill 相关关键词\n        // 实际应该用 LLM 来判断意图\n        return {\n            inScope: true\n        }; // 简化处理，子类可覆盖\n    }\n    /**\n   * 处理超出范围的消息\n   */ handleOutOfScope(message) {\n        const strategy = this.config.behavior.outOfScopeStrategy;\n        switch(strategy){\n            case \"reject\":\n                return {\n                    content: \"我是\".concat(this.identity.name, \"，\").concat(this.identity.role, \"。这超出了我的专业范围，我只能回答\").concat(this.identity.role, \"相关的问题。\"),\n                    suggestedNextSteps: [\n                        \"尝试询问 PA（投资助手）\"\n                    ]\n                };\n            case \"delegate_to_pa\":\n                return {\n                    content: \"这超出了我的专业范围。让我请 PA 来帮你...\",\n                    suggestedNextSteps: [\n                        \"正在转交给 PA...\"\n                    ]\n                };\n            case \"suggest_pa\":\n                return {\n                    content: \"我是\".concat(this.identity.name, \"，\").concat(this.identity.role, \"。这个问题我不是很擅长，建议你问问 PA（投资助手），他有更全面的能力。\"),\n                    suggestedNextSteps: [\n                        \"询问 PA\"\n                    ]\n                };\n        }\n    }\n    // ========== Skill 执行 ==========\n    /**\n   * 执行指定的 Skill\n   */ async executeSkill(skillId, params) {\n        // 检查权限\n        if (!this.hasSkill(skillId)) {\n            if (this.autonomy === \"high\" && this.config.behavior.canUseDynamicSkills) {\n                // 高自主性 Agent 可以尝试动态添加\n                const added = this.addSkill(skillId);\n                if (!added) {\n                    throw new Error(\"Skill \".concat(skillId, \" not available and cannot be added\"));\n                }\n            } else {\n                throw new Error(\"Skill \".concat(skillId, \" not available for \").concat(this.identity.id));\n            }\n        }\n        const skill = SkillRegistry.get(skillId);\n        if (!skill) {\n            throw new Error(\"Skill \".concat(skillId, \" not found in registry\"));\n        }\n        // 执行前钩子\n        await this.beforeSkillExecute(skillId, params);\n        // 构建 Skill 上下文\n        const skillContext = {\n            agentId: this.identity.id,\n            memory: this.memory,\n            callHistory: this.skillCallHistory\n        };\n        // 执行 Skill\n        const result = await skill.handler(params, skillContext);\n        // 记录调用历史\n        const call = {\n            skillId,\n            params,\n            result,\n            timestamp: Date.now()\n        };\n        this.skillCallHistory.push(call);\n        // 更新记忆\n        this.memory.session.addMessage(\"skill\", \"[Executed \".concat(skillId, \"] \").concat(JSON.stringify(result).slice(0, 200)));\n        this.memory.individual.addExperience({\n            type: \"analysis\",\n            content: \"Executed skill: \".concat(skillId),\n            result: result.error ? \"failure\" : \"success\",\n            metadata: {\n                params,\n                result\n            }\n        });\n        // 执行后钩子\n        await this.afterSkillExecute(skillId, result);\n        return result;\n    }\n    /**\n   * 执行多个 Skills（顺序执行）\n   */ async executeSkills(calls) {\n        const results = [];\n        for (const call of calls){\n            const result = await this.executeSkill(call.skillId, call.params);\n            results.push(result);\n        }\n        return results;\n    }\n    // ========== 工作流执行 ==========\n    /**\n   * 执行工作流\n   */ async executeWorkflow(workflow) {\n        const context = {\n            ...workflow.context\n        };\n        for (const step of workflow.steps){\n            // 检查条件\n            if (step.condition && !step.condition(context)) {\n                continue;\n            }\n            try {\n                // 解析参数\n                const params = typeof step.params === \"function\" ? step.params(context) : step.params;\n                // 执行 Skill\n                const result = await this.executeSkill(step.skillId, params);\n                context[step.id] = result;\n            } catch (error) {\n                console.error(\"Workflow step \".concat(step.id, \" failed:\"), error);\n                if (step.onError === \"stop\") {\n                    throw error;\n                } else if (step.onError === \"retry\") {\n                    // 简单的重试逻辑\n                    await new Promise((r)=>setTimeout(r, 1000));\n                    const result = await this.executeSkill(step.skillId, step.params);\n                    context[step.id] = result;\n                }\n            // 'continue' - 忽略错误继续\n            }\n        }\n        return context;\n    }\n    // ========== 主动任务（仅高自主性 Agent） ==========\n    /**\n   * 启动主动任务调度（仅 PA 或高自主性 Agent）\n   */ startProactiveTasks() {\n        if (!this.config.behavior.proactiveEnabled) {\n            return;\n        }\n        // 子类实现具体的调度逻辑\n        console.log(\"[\".concat(this.identity.id, \"] Proactive tasks enabled\"));\n    }\n    // ========== 钩子方法（子类可覆盖） ==========\n    async beforeSkillExecute(skillId, params) {\n    // 子类可覆盖\n    }\n    async afterSkillExecute(skillId, result) {\n    // 子类可覆盖\n    }\n    // ========== 工具方法 ==========\n    /**\n   * 构建 System Prompt\n   */ buildSystemPrompt() {\n        const { identity, prompts } = this.config;\n        let prompt = prompts.system;\n        // 添加身份信息\n        prompt += \"\\n\\n你的身份：\".concat(identity.name, \"，\").concat(identity.role, \"。\");\n        prompt += \"\\n性格：\".concat(identity.personality);\n        // 添加可用 Skills\n        const skills = this.getAvailableSkills();\n        if (skills.length > 0) {\n            prompt += \"\\n\\n你可以使用以下能力：\".concat(skills.join(\", \"));\n        }\n        // 添加约束\n        if (prompts.constraints.length > 0) {\n            prompt += \"\\n\\n约束：\\n\".concat(prompts.constraints.map((c)=>\"- \".concat(c)).join(\"\\n\"));\n        }\n        return prompt;\n    }\n    /**\n   * 获取最近的操作历史（用于上下文）\n   */ getRecentHistory() {\n        let limit = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 5;\n        return this.skillCallHistory.slice(-limit);\n    }\n    // ========== 静态方法 ==========\n    static registerSkill(skill) {\n        SkillRegistry.register(skill);\n    }\n    static getRegisteredSkills() {\n        return SkillRegistry.list();\n    }\n    constructor(config){\n        this.skillCallHistory = [];\n        this.config = config;\n        // 初始化记忆系统\n        this.memory = {\n            session: new SessionMemoryImpl(),\n            individual: new IndividualMemoryImpl(),\n            collective: new CollectiveMemoryImpl()\n        };\n        // 初始化 Skills\n        this.baseSkills = new Set(config.capabilities.baseSkills);\n        this.extendedSkills = new Set(config.capabilities.extendableSkills);\n    }\n}\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9jb3JlL2Jhc2UtYWdlbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7Ozs7Ozs7OztDQVVDLEdBb0JELCtCQUErQjtBQUUvQixNQUFNQTtJQUlKQyxXQUFXQyxJQUErQyxFQUFFQyxPQUFlLEVBQVE7UUFDakYsSUFBSSxDQUFDQyxRQUFRLENBQUNDLElBQUksQ0FBQztZQUFFSDtZQUFNQztZQUFTRyxXQUFXQyxLQUFLQyxHQUFHO1FBQUc7SUFDNUQ7SUFFQUMsVUFBVUMsS0FBYSxFQUErRDtRQUNwRixPQUFPLElBQUksQ0FBQ04sUUFBUSxDQUFDTyxLQUFLLENBQUMsQ0FBQ0Q7SUFDOUI7SUFFQUUsUUFBYztRQUNaLElBQUksQ0FBQ1IsUUFBUSxHQUFHLEVBQUU7UUFDbEIsSUFBSSxDQUFDUyxPQUFPLEdBQUcsQ0FBQztJQUNsQjs7YUFkQVQsV0FBMkcsRUFBRTthQUM3R1MsVUFBK0IsQ0FBQzs7QUFjbEM7QUFFQSxNQUFNQztJQVVKQyxjQUFjQyxVQUFpRSxFQUFRO1FBQ3JGLElBQUksQ0FBQ0MsV0FBVyxDQUFDWixJQUFJLENBQUM7WUFBRSxHQUFHVyxVQUFVO1lBQUVWLFdBQVdDLEtBQUtDLEdBQUc7UUFBRztRQUM3RCxJQUFJLENBQUNVLEtBQUssQ0FBQ0MsWUFBWSxHQUFHWixLQUFLQyxHQUFHO0lBQ3BDO0lBRUFZLFlBQVlDLE1BQTBDLEVBQVE7UUFDNUQsSUFBSSxDQUFDSCxLQUFLLEdBQUc7WUFBRSxHQUFHLElBQUksQ0FBQ0EsS0FBSztZQUFFLEdBQUdHLE1BQU07WUFBRUYsY0FBY1osS0FBS0MsR0FBRztRQUFHO0lBQ3BFO0lBRUFjLGVBQWVDLE1BQTBDLEVBQW1DO1FBQzFGLElBQUlDLFNBQVMsSUFBSSxDQUFDUCxXQUFXO1FBQzdCLElBQUlNLG1CQUFBQSw2QkFBQUEsT0FBUUUsSUFBSSxFQUFFO1lBQ2hCRCxTQUFTQSxPQUFPRCxNQUFNLENBQUNHLENBQUFBLElBQUtBLEVBQUVELElBQUksS0FB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RixzQkFBeUM7UUFDOUMsT0FBT2hHLGNBQWNRLElBQUk7SUFDM0I7SUEvVEF5RixZQUFZOUUsTUFBbUIsQ0FBRTthQUZ6QnlDLG1CQUFnQyxFQUFFO1FBR3hDLElBQUksQ0FBQ3pDLE1BQU0sR0FBR0E7UUFFZCxVQUFVO1FBQ1YsSUFBSSxDQUFDdUMsTUFBTSxHQUFHO1lBQ1pLLFNBQVMsSUFBSWhIO1lBQ2JtSCxZQUFZLElBQUlyRztZQUNoQnFJLFlBQVksSUFBSXBIO1FBQ2xCO1FBRUEsYUFBYTtRQUNiLElBQUksQ0FBQzBDLFVBQVUsR0FBRyxJQUFJMkUsSUFBSWhGLE9BQU9ZLFlBQVksQ0FBQ1AsVUFBVTtRQUN4RCxJQUFJLENBQUNDLGNBQWMsR0FBRyxJQUFJMEUsSUFBSWhGLE9BQU9ZLFlBQVksQ0FBQ0MsZ0JBQWdCO0lBQ3BFO0FBbVRGO0FBRXlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2xpYi9jb3JlL2Jhc2UtYWdlbnQudHM/ZDMyOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRyYWRlTWluZCBGcmFtZXdvcmsgLSBCYXNlQWdlbnRcbiAqIFxuICog5omA5pyJIEFnZW50IOeahOaKveixoeWfuuexu1xuICogXG4gKiDmoLjlv4Porr7orqHvvJpcbiAqIDEuIOavj+S4qiBBZ2VudCDmnInpooTliLYgU2tpbGxz77yI5LiN6IO95YeP5bCR77yM5Y+v5aKe5Yqg77yJXG4gKiAyLiDkuInlsYLorrDlv4bvvJrkvJror50v5Liq5L2TL+mbhuS9k1xuICogMy4g6Ieq5Li75oCn5Y+v6YWN572u77yaUEEg6auY6Ieq5Li75oCn77yM5YW25LuWIEFnZW50IOWPr+mZkOWItlxuICogNC4gUEEg5pyJ54m55q6K5qCH6K6wIGlzUHJpbWFyeSDlkozni6znibnog73liptcbiAqL1xuXG5pbXBvcnQgdHlwZSB7XG4gIEFnZW50Q29uZmlnLFxuICBBZ2VudElkZW50aXR5LFxuICBBZ2VudE1lbW9yeSxcbiAgQXV0b25vbXlMZXZlbCxcbiAgQ2hhdENvbnRleHQsXG4gIENoYXRNZXNzYWdlLFxuICBDaGF0UmVzcG9uc2UsXG4gIENvbGxlY3RpdmVNZW1vcnksXG4gIEluZGl2aWR1YWxNZW1vcnksXG4gIFNlc3Npb25NZW1vcnksXG4gIFNraWxsQ2FsbCxcbiAgU2tpbGxDb250ZXh0LFxuICBTa2lsbERlZmluaXRpb24sXG4gIFdvcmtmbG93LFxuICBXb3JrZmxvd1N0ZXAsXG59IGZyb20gJy4vdHlwZXMnO1xuXG4vLyA9PT09PT09PT09IOiusOW/huezu+e7n+WunueOsCA9PT09PT09PT09XG5cbmNsYXNzIFNlc3Npb25NZW1vcnlJbXBsIGltcGxlbWVudHMgU2Vzc2lvbk1lbW9yeSB7XG4gIG1lc3NhZ2VzOiBBcnJheTx7IHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnIHwgJ3N5c3RlbScgfCAnc2tpbGwnOyBjb250ZW50OiBzdHJpbmc7IHRpbWVzdGFtcDogbnVtYmVyIH0+ID0gW107XG4gIGNvbnRleHQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuICBhZGRNZXNzYWdlKHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnIHwgJ3N5c3RlbScgfCAnc2tpbGwnLCBjb250ZW50OiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLm1lc3NhZ2VzLnB1c2goeyByb2xlLCBjb250ZW50LCB0aW1lc3RhbXA6IERhdGUubm93KCkgfSk7XG4gIH1cblxuICBnZXRSZWNlbnQobGltaXQ6IG51bWJlcik6IEFycmF5PHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmc7IHRpbWVzdGFtcDogbnVtYmVyIH0+IHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlcy5zbGljZSgtbGltaXQpO1xuICB9XG5cbiAgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgIHRoaXMuY29udGV4dCA9IHt9O1xuICB9XG59XG5cbmNsYXNzIEluZGl2aWR1YWxNZW1vcnlJbXBsIGltcGxlbWVudHMgSW5kaXZpZHVhbE1lbW9yeSB7XG4gIHN0YXRzID0ge1xuICAgIHRvdGFsQW5hbHlzZXM6IDAsXG4gICAgdG90YWxUcmFkZXM6IDAsXG4gICAgYWNjdXJhY3lSYXRlOiAwLFxuICAgIGxhc3RBY3RpdmVBdDogRGF0ZS5ub3coKSxcbiAgfTtcbiAgZXhwZXJpZW5jZXM6IEluZGl2aWR1YWxNZW1vcnlbJ2V4cGVyaWVuY2VzJ10gPSBbXTtcbiAgdXNlclByZWZlcmVuY2VzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG5cbiAgYWRkRXhwZXJpZW5jZShleHBlcmllbmNlOiBPbWl0PEluZGl2aWR1YWxNZW1vcnlbJ2V4cGVyaWVuY2VzJ11bMF0sICd0aW1lc3RhbXAnPik6IHZvaWQge1xuICAgIHRoaXMuZXhwZXJpZW5jZXMucHVzaCh7IC4uLmV4cGVyaWVuY2UsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9KTtcbiAgICB0aGlzLnN0YXRzLmxhc3RBY3RpdmVBdCA9IERhdGUubm93KCk7XG4gIH1cblxuICB1cGRhdGVTdGF0cyh1cGRhdGU6IFBhcnRpYWw8SW5kaXZpZHVhbE1lbW9yeVsnc3RhdHMnXT4pOiB2b2lkIHtcbiAgICB0aGlzLnN0YXRzID0geyAuLi50aGlzLnN0YXRzLCAuLi51cGRhdGUsIGxhc3RBY3RpdmVBdDogRGF0ZS5ub3coKSB9O1xuICB9XG5cbiAgZ2V0RXhwZXJpZW5jZXMoZmlsdGVyPzogeyB0eXBlPzogc3RyaW5nOyBsaW1pdD86IG51bWJlciB9KTogSW5kaXZpZHVhbE1lbW9yeVsnZXhwZXJpZW5jZXMnXSB7XG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuZXhwZXJpZW5jZXM7XG4gICAgaWYgKGZpbHRlcj8udHlwZSkge1xuICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcihlID0+IGUudHlwZSA9PT0gZmlsdGVyLnR5cGUpO1xuICAgIH1cbiAgICBpZiAoZmlsdGVyPy5saW1pdCkge1xuICAgICAgcmVzdWx0ID0gcmVzdWx0LnNsaWNlKC1maWx0ZXIubGltaXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59XG5cbmNsYXNzIENvbGxlY3RpdmVNZW1vcnlJbXBsIGltcGxlbWVudHMgQ29sbGVjdGl2ZU1lbW9yeSB7XG4gIG1hcmtldEZhY3RzOiBDb2xsZWN0aXZlTWVtb3J5WydtYXJrZXRGYWN0cyddID0gW107XG4gIGFnZW50SW5zaWdodHM6IFJlY29yZDxzdHJpbmcsIEFycmF5PHsgY29udGVudDogc3RyaW5nOyB0aW1lc3RhbXA6IG51bWJlciB9Pj4gPSB7fTtcbiAgbGVzc29uczogQ29sbGVjdGl2ZU1lbW9yeVsnbGVzc29ucyddID0gW107XG5cbiAgYWRkRmFjdChmYWN0OiBPbWl0PENvbGxlY3RpdmVNZW1vcnlbJ21hcmtldEZhY3RzJ11bMF0sICd0aW1lc3RhbXAnPik6IHZvaWQge1xuICAgIHRoaXMubWFya2V0RmFjdHMucHVzaCh7IC4uLmZhY3QsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9KTtcbiAgICAvLyDmuIXnkIbov4fmnJ/kuovlrp5cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIHRoaXMubWFya2V0RmFjdHMgPSB0aGlzLm1hcmtldEZhY3RzLmZpbHRlcihmID0+ICFmLmV4cGlyZXNBdCB8fCBmLmV4cGlyZXNBdCA+IG5vdyk7XG4gIH1cblxuICBhZGRJbnNpZ2h0KGFnZW50SWQ6IHN0cmluZywgaW5zaWdodDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmFnZW50SW5zaWdodHNbYWdlbnRJZF0pIHtcbiAgICAgIHRoaXMuYWdlbnRJbnNpZ2h0c1thZ2VudElkXSA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmFnZW50SW5zaWdodHNbYWdlbnRJZF0ucHVzaCh7IGNvbnRlbnQ6IGluc2lnaHQsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9KTtcbiAgfVxuXG4gIGFkZExlc3NvbihsZXNzb246IE9taXQ8Q29sbGVjdGl2ZU1lbW9yeVsnbGVzc29ucyddWzBdLCAndGltZXN0YW1wJz4pOiB2b2lkIHtcbiAgICB0aGlzLmxlc3NvbnMucHVzaCh7IC4uLmxlc3NvbiwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0pO1xuICB9XG5cbiAgcXVlcnlGYWN0cyhmaWx0ZXI6IHsgdHlwZT86IHN0cmluZzsgc2luY2U/OiBudW1iZXIgfSk6IENvbGxlY3RpdmVNZW1vcnlbJ21hcmtldEZhY3RzJ10ge1xuICAgIGxldCByZXN1bHQgPSB0aGlzLm1hcmtldEZhY3RzO1xuICAgIGlmIChmaWx0ZXIudHlwZSkge1xuICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcihmID0+IGYudHlwZSA9PT0gZmlsdGVyLnR5cGUpO1xuICAgIH1cbiAgICBpZiAoZmlsdGVyLnNpbmNlKSB7XG4gICAgICByZXN1bHQgPSByZXN1bHQuZmlsdGVyKGYgPT4gZi50aW1lc3RhbXAgPj0gZmlsdGVyLnNpbmNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC5zb3J0KChhLCBiKSA9PiBiLnRpbWVzdGFtcCAtIGEudGltZXN0YW1wKTtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09IOWFqOWxgCBTa2lsbCDms6jlhozooaggPT09PT09PT09PVxuXG5jbGFzcyBTa2lsbFJlZ2lzdHJ5IHtcbiAgcHJpdmF0ZSBzdGF0aWMgc2tpbGxzID0gbmV3IE1hcDxzdHJpbmcsIFNraWxsRGVmaW5pdGlvbj4oKTtcblxuICBzdGF0aWMgcmVnaXN0ZXIoc2tpbGw6IFNraWxsRGVmaW5pdGlvbik6IHZvaWQge1xuICAgIHRoaXMuc2tpbGxzLnNldChza2lsbC5pZCwgc2tpbGwpO1xuICB9XG5cbiAgc3RhdGljIGdldChza2lsbElkOiBzdHJpbmcpOiBTa2lsbERlZmluaXRpb24gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLnNraWxscy5nZXQoc2tpbGxJZCk7XG4gIH1cblxuICBzdGF0aWMgbGlzdCgpOiBTa2lsbERlZmluaXRpb25bXSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5za2lsbHMudmFsdWVzKCkpO1xuICB9XG5cbiAgc3RhdGljIGZpbmRCeVByZWZpeChwcmVmaXg6IHN0cmluZyk6IFNraWxsRGVmaW5pdGlvbltdIHtcbiAgICByZXR1cm4gdGhpcy5saXN0KCkuZmlsdGVyKHMgPT4gcy5pZC5zdGFydHNXaXRoKHByZWZpeCkpO1xuICB9XG59XG5cbi8vID09PT09PT09PT0gQmFzZUFnZW50IOaKveixoeexuyA9PT09PT09PT09XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlQWdlbnQge1xuICByZWFkb25seSBjb25maWc6IEFnZW50Q29uZmlnO1xuICByZWFkb25seSBtZW1vcnk6IEFnZW50TWVtb3J5O1xuICBcbiAgLy8gU2tpbGwg566h55CGXG4gIHByaXZhdGUgYmFzZVNraWxsczogU2V0PHN0cmluZz47ICAgICAgLy8g6aKE5Yi25oqA6IO977yI5LiN6IO95YeP5bCR77yJXG4gIHByaXZhdGUgZXh0ZW5kZWRTa2lsbHM6IFNldDxzdHJpbmc+OyAgLy8g5Yqo5oCB5re75Yqg55qE5oqA6IO9XG4gIHByaXZhdGUgc2tpbGxDYWxsSGlzdG9yeTogU2tpbGxDYWxsW10gPSBbXTtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IEFnZW50Q29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgXG4gICAgLy8g5Yid5aeL5YyW6K6w5b+G57O757ufXG4gICAgdGhpcy5tZW1vcnkgPSB7XG4gICAgICBzZXNzaW9uOiBuZXcgU2Vzc2lvbk1lbW9yeUltcGwoKSxcbiAgICAgIGluZGl2aWR1YWw6IG5ldyBJbmRpdmlkdWFsTWVtb3J5SW1wbCgpLFxuICAgICAgY29sbGVjdGl2ZTogbmV3IENvbGxlY3RpdmVNZW1vcnlJbXBsKCksXG4gICAgfTtcblxuICAgIC8vIOWIneWni+WMliBTa2lsbHNcbiAgICB0aGlzLmJhc2VTa2lsbHMgPSBuZXcgU2V0KGNvbmZpZy5jYXBhYmlsaXRpZXMuYmFzZVNraWxscyk7XG4gICAgdGhpcy5leHRlbmRlZFNraWxscyA9IG5ldyBTZXQoY29uZmlnLmNhcGFiaWxpdGllcy5leHRlbmRhYmxlU2tpbGxzKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT0g6Lqr5Lu95LiO6YWN572uID09PT09PT09PT1cblxuICBnZXQgaWRlbnRpdHkoKTogQWdlbnRJZGVudGl0eSB7XG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLmlkZW50aXR5O1xuICB9XG5cbiAgZ2V0IGlzUHJpbWFyeSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWcuaXNQcmltYXJ5ID8/IGZhbHNlO1xuICB9XG5cbiAgZ2V0IGF1dG9ub215KCk6IEF1dG9ub215TGV2ZWwge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZy5iZWhhdmlvci5hdXRvbm9teTtcbiAgfVxuXG4gIC8vID09PT09PT09PT0gU2tpbGwg566h55CGID09PT09PT09PT1cblxuICAvKipcbiAgICog6I635Y+W5omA5pyJ5Y+v55So55qEIFNraWxsIElEc1xuICAgKi9cbiAgZ2V0QXZhaWxhYmxlU2tpbGxzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gWy4uLnRoaXMuYmFzZVNraWxscywgLi4udGhpcy5leHRlbmRlZFNraWxsc107XG4gIH1cblxuICAvKipcbiAgICog5qOA5p+l5piv5ZCm5pyJ5p+Q5LiqIFNraWxsXG4gICAqL1xuICBoYXNTa2lsbChza2lsbElkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5iYXNlU2tpbGxzLmhhcyhza2lsbElkKSB8fCB0aGlzLmV4dGVuZGVkU2tpbGxzLmhhcyhza2lsbElkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliqjmgIHmt7vliqAgU2tpbGzvvIjkuI3og73lh4/lsJHpooTliLYgU2tpbGxz77yJXG4gICAqL1xuICBhZGRTa2lsbChza2lsbElkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyDmo4Dmn6UgU2tpbGwg5piv5ZCm5a2Y5Zyo5LqO5YWo5bGA5rOo5YaM6KGoXG4gICAgY29uc3Qgc2tpbGwgPSBTa2lsbFJlZ2lzdHJ5LmdldChza2lsbElkKTtcbiAgICBpZiAoIXNraWxsKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFNraWxsICR7c2tpbGxJZH0gbm90IGZvdW5kIGluIHJlZ2lzdHJ5YCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8g5qOA5p+l5piv5ZCm5Zyo5YWB6K645omp5bGV55qE5YiX6KGo5LitXG4gICAgaWYgKCF0aGlzLmNvbmZpZy5jYXBhYmlsaXRpZXMuZXh0ZW5kYWJsZVNraWxscy5pbmNsdWRlcyhza2lsbElkKSkge1xuICAgICAgY29uc29sZS53YXJuKGBTa2lsbCAke3NraWxsSWR9IG5vdCBpbiBleHRlbmRhYmxlIGxpc3QgZm9yICR7dGhpcy5pZGVudGl0eS5pZH1gKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLmV4dGVuZGVkU2tpbGxzLmFkZChza2lsbElkKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDliqjmgIHlj5HnjrDlj6/nlKjnmoQgU2tpbGxz77yI6auY6Ieq5Li75oCnIEFnZW50IOWPr+eUqO+8iVxuICAgKi9cbiAgZGlzY292ZXJTa2lsbHMoaW50ZW50OiBzdHJpbmcpOiBTa2lsbERlZmluaXRpb25bXSB7XG4gICAgaWYgKHRoaXMuYXV0b25vbXkgPT09ICdsb3cnKSB7XG4gICAgICByZXR1cm4gW107IC8vIOS9juiHquS4u+aApyBBZ2VudCDkuI3og73liqjmgIHlj5HnjrBcbiAgICB9XG5cbiAgICAvLyDnroDljZXnmoTlhbPplK7or43ljLnphY3vvIzlrp7pmYXlj6/ku6XnlKggTExNIOadpeWBmuaEj+WbvuWMuemFjVxuICAgIGNvbnN0IGFsbFNraWxscyA9IFNraWxsUmVnaXN0cnkubGlzdCgpO1xuICAgIHJldHVybiBhbGxTa2lsbHMuZmlsdGVyKHNraWxsID0+IFxuICAgICAgc2tpbGwuZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhpbnRlbnQudG9Mb3dlckNhc2UoKSkgfHxcbiAgICAgIHNraWxsLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhpbnRlbnQudG9Mb3dlckNhc2UoKSlcbiAgICApO1xuICB9XG5cbiAgLy8gPT09PT09PT09PSDmoLjlv4Plr7nor53mjqXlj6MgPT09PT09PT09PVxuXG4gIC8qKlxuICAgKiDkuLvlr7nor53lhaXlj6MgLSDmiYDmnIkgQWdlbnQg6YO95b+F6aG75a6e546wXG4gICAqL1xuICBhYnN0cmFjdCBjaGF0KG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IENoYXRDb250ZXh0KTogUHJvbWlzZTxDaGF0UmVzcG9uc2U+O1xuXG4gIC8qKlxuICAgKiDmo4Dmn6Xmtojmga/mmK/lkKblnKjlvZPliY0gQWdlbnQg55qE6IO95Yqb6IyD5Zu05YaFXG4gICAqL1xuICBwcm90ZWN0ZWQgY2hlY2tTY29wZShtZXNzYWdlOiBzdHJpbmcpOiB7IGluU2NvcGU6IGJvb2xlYW47IHJlYXNvbj86IHN0cmluZyB9IHtcbiAgICAvLyDlrZDnsbvlj6/ku6Xopobnm5bmraTmlrnms5XmnaXlrp7njrDmm7Tnsr7noa7nmoTln5/mo4Dmn6VcbiAgICAvLyDpu5jorqTlrp7njrDvvJpQQSDmgLvmmK/ov5Tlm54gdHJ1Ze+8jOWFtuS7liBBZ2VudCDkvp3otZbphY3nva5cbiAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHtcbiAgICAgIHJldHVybiB7IGluU2NvcGU6IHRydWUgfTtcbiAgICB9XG5cbiAgICAvLyDpnZ4gUEEgQWdlbnTvvJrmo4Dmn6XmmK/lkKbmnInljLnphY3nmoQgU2tpbGxcbiAgICBjb25zdCBhdmFpbGFibGVTa2lsbHMgPSB0aGlzLmdldEF2YWlsYWJsZVNraWxscygpO1xuICAgIGlmIChhdmFpbGFibGVTa2lsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4geyBpblNjb3BlOiBmYWxzZSwgcmVhc29uOiAnTm8gc2tpbGxzIGF2YWlsYWJsZScgfTtcbiAgICB9XG5cbiAgICAvLyDnroDljZXlkK/lj5HlvI/vvJrmo4Dmn6Xmtojmga/mmK/lkKbljIXlkKsgc2tpbGwg55u45YWz5YWz6ZSu6K+NXG4gICAgLy8g5a6e6ZmF5bqU6K+l55SoIExMTSDmnaXliKTmlq3mhI/lm75cbiAgICByZXR1cm4geyBpblNjb3BlOiB0cnVlIH07IC8vIOeugOWMluWkhOeQhu+8jOWtkOexu+WPr+imhuebllxuICB9XG5cbiAgLyoqXG4gICAqIOWkhOeQhui2heWHuuiMg+WbtOeahOa2iOaBr1xuICAgKi9cbiAgcHJvdGVjdGVkIGhhbmRsZU91dE9mU2NvcGUobWVzc2FnZTogc3RyaW5nKTogQ2hhdFJlc3BvbnNlIHtcbiAgICBjb25zdCBzdHJhdGVneSA9IHRoaXMuY29uZmlnLmJlaGF2aW9yLm91dE9mU2NvcGVTdHJhdGVneTtcbiAgICBcbiAgICBzd2l0Y2ggKHN0cmF0ZWd5KSB7XG4gICAgICBjYXNlICdyZWplY3QnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvbnRlbnQ6IGDmiJHmmK8ke3RoaXMuaWRlbnRpdHkubmFtZX3vvIwke3RoaXMuaWRlbnRpdHkucm9sZX3jgILov5notoXlh7rkuobmiJHnmoTkuJPkuJrojIPlm7TvvIzmiJHlj6rog73lm57nrZQke3RoaXMuaWRlbnRpdHkucm9sZX3nm7jlhbPnmoTpl67popjjgIJgLFxuICAgICAgICAgIHN1Z2dlc3RlZE5leHRTdGVwczogWyflsJ3or5Xor6Lpl64gUEHvvIjmipXotYTliqnmiYvvvIknXSxcbiAgICAgICAgfTtcbiAgICAgIFxuICAgICAgY2FzZSAnZGVsZWdhdGVfdG9fcGEnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvbnRlbnQ6IGDov5notoXlh7rkuobmiJHnmoTkuJPkuJrojIPlm7TjgILorqnmiJHor7cgUEEg5p2l5biu5L2gLi4uYCxcbiAgICAgICAgICBzdWdnZXN0ZWROZXh0U3RlcHM6IFsn5q2j5Zyo6L2s5Lqk57uZIFBBLi4uJ10sXG4gICAgICAgIH07XG4gICAgICBcbiAgICAgIGNhc2UgJ3N1Z2dlc3RfcGEnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvbnRlbnQ6IGDmiJHmmK8ke3RoaXMuaWRlbnRpdHkubmFtZX3vvIwke3RoaXMuaWRlbnRpdHkucm9sZX3jgILov5nkuKrpl67popjmiJHkuI3mmK/lvojmk4Xplb/vvIzlu7rorq7kvaDpl67pl64gUEHvvIjmipXotYTliqnmiYvvvInvvIzku5bmnInmm7TlhajpnaLnmoTog73lipvjgIJgLFxuICAgICAgICAgIHN1Z2dlc3RlZE5leHRTdGVwczogWyfor6Lpl64gUEEnXSxcbiAgICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyA9PT09PT09PT09IFNraWxsIOaJp+ihjCA9PT09PT09PT09XG5cbiAgLyoqXG4gICAqIOaJp+ihjOaMh+WumueahCBTa2lsbFxuICAgKi9cbiAgcHJvdGVjdGVkIGFzeW5jIGV4ZWN1dGVTa2lsbChza2lsbElkOiBzdHJpbmcsIHBhcmFtczogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICAvLyDmo4Dmn6XmnYPpmZBcbiAgICBpZiAoIXRoaXMuaGFzU2tpbGwoc2tpbGxJZCkpIHtcbiAgICAgIGlmICh0aGlzLmF1dG9ub215ID09PSAnaGlnaCcgJiYgdGhpcy5jb25maWcuYmVoYXZpb3IuY2FuVXNlRHluYW1pY1NraWxscykge1xuICAgICAgICAvLyDpq5joh6rkuLvmgKcgQWdlbnQg5Y+v5Lul5bCd6K+V5Yqo5oCB5re75YqgXG4gICAgICAgIGNvbnN0IGFkZGVkID0gdGhpcy5hZGRTa2lsbChza2lsbElkKTtcbiAgICAgICAgaWYgKCFhZGRlZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU2tpbGwgJHtza2lsbElkfSBub3QgYXZhaWxhYmxlIGFuZCBjYW5ub3QgYmUgYWRkZWRgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTa2lsbCAke3NraWxsSWR9IG5vdCBhdmFpbGFibGUgZm9yICR7dGhpcy5pZGVudGl0eS5pZH1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBza2lsbCA9IFNraWxsUmVnaXN0cnkuZ2V0KHNraWxsSWQpO1xuICAgIGlmICghc2tpbGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgU2tpbGwgJHtza2lsbElkfSBub3QgZm91bmQgaW4gcmVnaXN0cnlgKTtcbiAgICB9XG5cbiAgICAvLyDmiafooYzliY3pkqnlrZBcbiAgICBhd2FpdCB0aGlzLmJlZm9yZVNraWxsRXhlY3V0ZShza2lsbElkLCBwYXJhbXMpO1xuXG4gICAgLy8g5p6E5bu6IFNraWxsIOS4iuS4i+aWh1xuICAgIGNvbnN0IHNraWxsQ29udGV4dDogU2tpbGxDb250ZXh0ID0ge1xuICAgICAgYWdlbnRJZDogdGhpcy5pZGVudGl0eS5pZCxcbiAgICAgIG1lbW9yeTogdGhpcy5tZW1vcnksXG4gICAgICBjYWxsSGlzdG9yeTogdGhpcy5za2lsbENhbGxIaXN0b3J5LFxuICAgIH07XG5cbiAgICAvLyDmiafooYwgU2tpbGxcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBza2lsbC5oYW5kbGVyKHBhcmFtcywgc2tpbGxDb250ZXh0KTtcblxuICAgIC8vIOiusOW9leiwg+eUqOWOhuWPslxuICAgIGNvbnN0IGNhbGw6IFNraWxsQ2FsbCA9IHtcbiAgICAgIHNraWxsSWQsXG4gICAgICBwYXJhbXMsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfTtcbiAgICB0aGlzLnNraWxsQ2FsbEhpc3RvcnkucHVzaChjYWxsKTtcblxuICAgIC8vIOabtOaWsOiusOW/hlxuICAgIHRoaXMubWVtb3J5LnNlc3Npb24uYWRkTWVzc2FnZSgnc2tpbGwnLCBgW0V4ZWN1dGVkICR7c2tpbGxJZH1dICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0KS5zbGljZSgwLCAyMDApfWApO1xuICAgIHRoaXMubWVtb3J5LmluZGl2aWR1YWwuYWRkRXhwZXJpZW5jZSh7XG4gICAgICB0eXBlOiAnYW5hbHlzaXMnLFxuICAgICAgY29udGVudDogYEV4ZWN1dGVkIHNraWxsOiAke3NraWxsSWR9YCxcbiAgICAgIHJlc3VsdDogcmVzdWx0LmVycm9yID8gJ2ZhaWx1cmUnIDogJ3N1Y2Nlc3MnLFxuICAgICAgbWV0YWRhdGE6IHsgcGFyYW1zLCByZXN1bHQgfSxcbiAgICB9KTtcblxuICAgIC8vIOaJp+ihjOWQjumSqeWtkFxuICAgIGF3YWl0IHRoaXMuYWZ0ZXJTa2lsbEV4ZWN1dGUoc2tpbGxJZCwgcmVzdWx0KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICog5omn6KGM5aSa5LiqIFNraWxsc++8iOmhuuW6j+aJp+ihjO+8iVxuICAgKi9cbiAgcHJvdGVjdGVkIGFzeW5jIGV4ZWN1dGVTa2lsbHMoY2FsbHM6IEFycmF5PHsgc2tpbGxJZDogc3RyaW5nOyBwYXJhbXM6IGFueSB9Pik6IFByb21pc2U8YW55W10+IHtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgZm9yIChjb25zdCBjYWxsIG9mIGNhbGxzKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGVTa2lsbChjYWxsLnNraWxsSWQsIGNhbGwucGFyYW1zKTtcbiAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIC8vID09PT09PT09PT0g5bel5L2c5rWB5omn6KGMID09PT09PT09PT1cblxuICAvKipcbiAgICog5omn6KGM5bel5L2c5rWBXG4gICAqL1xuICBhc3luYyBleGVjdXRlV29ya2Zsb3cod29ya2Zsb3c6IFdvcmtmbG93KTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBhbnk+PiB7XG4gICAgY29uc3QgY29udGV4dDogUmVjb3JkPHN0cmluZywgYW55PiA9IHsgLi4ud29ya2Zsb3cuY29udGV4dCB9O1xuICAgIFxuICAgIGZvciAoY29uc3Qgc3RlcCBvZiB3b3JrZmxvdy5zdGVwcykge1xuICAgICAgLy8g5qOA5p+l5p2h5Lu2XG4gICAgICBpZiAoc3RlcC5jb25kaXRpb24gJiYgIXN0ZXAuY29uZGl0aW9uKGNvbnRleHQpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICAvLyDop6PmnpDlj4LmlbBcbiAgICAgICAgY29uc3QgcGFyYW1zID0gdHlwZW9mIHN0ZXAucGFyYW1zID09PSAnZnVuY3Rpb24nIFxuICAgICAgICAgID8gc3RlcC5wYXJhbXMoY29udGV4dCkgXG4gICAgICAgICAgOiBzdGVwLnBhcmFtcztcblxuICAgICAgICAvLyDmiafooYwgU2tpbGxcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlU2tpbGwoc3RlcC5za2lsbElkLCBwYXJhbXMpO1xuICAgICAgICBjb250ZXh0W3N0ZXAuaWRdID0gcmVzdWx0O1xuXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBXb3JrZmxvdyBzdGVwICR7c3RlcC5pZH0gZmFpbGVkOmAsIGVycm9yKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzdGVwLm9uRXJyb3IgPT09ICdzdG9wJykge1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9IGVsc2UgaWYgKHN0ZXAub25FcnJvciA9PT0gJ3JldHJ5Jykge1xuICAgICAgICAgIC8vIOeugOWNleeahOmHjeivlemAu+i+kVxuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCAxMDAwKSk7XG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlU2tpbGwoc3RlcC5za2lsbElkLCBzdGVwLnBhcmFtcyk7XG4gICAgICAgICAgY29udGV4dFtzdGVwLmlkXSA9IHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICAvLyAnY29udGludWUnIC0g5b+955Wl6ZSZ6K+v57un57utXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRleHQ7XG4gIH1cblxuICAvLyA9PT09PT09PT09IOS4u+WKqOS7u+WKoe+8iOS7hemrmOiHquS4u+aApyBBZ2VudO+8iSA9PT09PT09PT09XG5cbiAgLyoqXG4gICAqIOWQr+WKqOS4u+WKqOS7u+WKoeiwg+W6pu+8iOS7hSBQQSDmiJbpq5joh6rkuLvmgKcgQWdlbnTvvIlcbiAgICovXG4gIHByb3RlY3RlZCBzdGFydFByb2FjdGl2ZVRhc2tzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb25maWcuYmVoYXZpb3IucHJvYWN0aXZlRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIOWtkOexu+WunueOsOWFt+S9k+eahOiwg+W6pumAu+i+kVxuICAgIGNvbnNvbGUubG9nKGBbJHt0aGlzLmlkZW50aXR5LmlkfV0gUHJvYWN0aXZlIHRhc2tzIGVuYWJsZWRgKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT0g6ZKp5a2Q5pa55rOV77yI5a2Q57G75Y+v6KaG55uW77yJID09PT09PT09PT1cblxuICBwcm90ZWN0ZWQgYXN5bmMgYmVmb3JlU2tpbGxFeGVjdXRlKHNraWxsSWQ6IHN0cmluZywgcGFyYW1zOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyDlrZDnsbvlj6/opobnm5ZcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBhZnRlclNraWxsRXhlY3V0ZShza2lsbElkOiBzdHJpbmcsIHJlc3VsdDogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8g5a2Q57G75Y+v6KaG55uWXG4gIH1cblxuICAvLyA9PT09PT09PT09IOW3peWFt+aWueazlSA9PT09PT09PT09XG5cbiAgLyoqXG4gICAqIOaehOW7uiBTeXN0ZW0gUHJvbXB0XG4gICAqL1xuICBwcm90ZWN0ZWQgYnVpbGRTeXN0ZW1Qcm9tcHQoKTogc3RyaW5nIHtcbiAgICBjb25zdCB7IGlkZW50aXR5LCBwcm9tcHRzIH0gPSB0aGlzLmNvbmZpZztcbiAgICBcbiAgICBsZXQgcHJvbXB0ID0gcHJvbXB0cy5zeXN0ZW07XG4gICAgXG4gICAgLy8g5re75Yqg6Lqr5Lu95L+h5oGvXG4gICAgcHJvbXB0ICs9IGBcXG5cXG7kvaDnmoTouqvku73vvJoke2lkZW50aXR5Lm5hbWV977yMJHtpZGVudGl0eS5yb2xlfeOAgmA7XG4gICAgcHJvbXB0ICs9IGBcXG7mgKfmoLzvvJoke2lkZW50aXR5LnBlcnNvbmFsaXR5fWA7XG4gICAgXG4gICAgLy8g5re75Yqg5Y+v55SoIFNraWxsc1xuICAgIGNvbnN0IHNraWxscyA9IHRoaXMuZ2V0QXZhaWxhYmxlU2tpbGxzKCk7XG4gICAgaWYgKHNraWxscy5sZW5ndGggPiAwKSB7XG4gICAgICBwcm9tcHQgKz0gYFxcblxcbuS9oOWPr+S7peS9v+eUqOS7peS4i+iDveWKm++8miR7c2tpbGxzLmpvaW4oJywgJyl9YDtcbiAgICB9XG5cbiAgICAvLyDmt7vliqDnuqbmnZ9cbiAgICBpZiAocHJvbXB0cy5jb25zdHJhaW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBwcm9tcHQgKz0gYFxcblxcbue6puadn++8mlxcbiR7cHJvbXB0cy5jb25zdHJhaW50cy5tYXAoYyA9PiBgLSAke2N9YCkuam9pbignXFxuJyl9YDtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbXB0O1xuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluacgOi/keeahOaTjeS9nOWOhuWPsu+8iOeUqOS6juS4iuS4i+aWh++8iVxuICAgKi9cbiAgcHJvdGVjdGVkIGdldFJlY2VudEhpc3RvcnkobGltaXQ6IG51bWJlciA9IDUpOiBTa2lsbENhbGxbXSB7XG4gICAgcmV0dXJuIHRoaXMuc2tpbGxDYWxsSGlzdG9yeS5zbGljZSgtbGltaXQpO1xuICB9XG5cbiAgLy8gPT09PT09PT09PSDpnZnmgIHmlrnms5UgPT09PT09PT09PVxuXG4gIHN0YXRpYyByZWdpc3RlclNraWxsKHNraWxsOiBTa2lsbERlZmluaXRpb24pOiB2b2lkIHtcbiAgICBTa2lsbFJlZ2lzdHJ5LnJlZ2lzdGVyKHNraWxsKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRSZWdpc3RlcmVkU2tpbGxzKCk6IFNraWxsRGVmaW5pdGlvbltdIHtcbiAgICByZXR1cm4gU2tpbGxSZWdpc3RyeS5saXN0KCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgU2tpbGxSZWdpc3RyeSB9O1xuIl0sIm5hbWVzIjpbIlNlc3Npb25NZW1vcnlJbXBsIiwiYWRkTWVzc2FnZSIsInJvbGUiLCJjb250ZW50IiwibWVzc2FnZXMiLCJwdXNoIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImdldFJlY2VudCIsImxpbWl0Iiwic2xpY2UiLCJjbGVhciIsImNvbnRleHQiLCJJbmRpdmlkdWFsTWVtb3J5SW1wbCIsImFkZEV4cGVyaWVuY2UiLCJleHBlcmllbmNlIiwiZXhwZXJpZW5jZXMiLCJzdGF0cyIsImxhc3RBY3RpdmVBdCIsInVwZGF0ZVN0YXRzIiwidXBkYXRlIiwiZ2V0RXhwZXJpZW5jZXMiLCJmaWx0ZXIiLCJyZXN1bHQiLCJ0eXBlIiwiZSIsInRvdGFsQW5hbHlzZXMiLCJ0b3RhbFRyYWRlcyIsImFjY3VyYWN5UmF0ZSIsInVzZXJQcmVmZXJlbmNlcyIsIkNvbGxlY3RpdmVNZW1vcnlJbXBsIiwiYWRkRmFjdCIsImZhY3QiLCJtYXJrZXRGYWN0cyIsImYiLCJleHBpcmVzQXQiLCJhZGRJbnNpZ2h0IiwiYWdlbnRJZCIsImluc2lnaHQiLCJhZ2VudEluc2lnaHRzIiwiYWRkTGVzc29uIiwibGVzc29uIiwibGVzc29ucyIsInF1ZXJ5RmFjdHMiLCJzaW5jZSIsInNvcnQiLCJhIiwiYiIsIlNraWxsUmVnaXN0cnkiLCJyZWdpc3RlciIsInNraWxsIiwic2tpbGxzIiwic2V0IiwiaWQiLCJnZXQiLCJza2lsbElkIiwibGlzdCIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImZpbmRCeVByZWZpeCIsInByZWZpeCIsInMiLCJzdGFydHNXaXRoIiwiTWFwIiwiQmFzZUFnZW50IiwiaWRlbnRpdHkiLCJjb25maWciLCJpc1ByaW1hcnkiLCJhdXRvbm9teSIsImJlaGF2aW9yIiwiZ2V0QXZhaWxhYmxlU2tpbGxzIiwiYmFzZVNraWxscyIsImV4dGVuZGVkU2tpbGxzIiwiaGFzU2tpbGwiLCJoYXMiLCJhZGRTa2lsbCIsImNvbnNvbGUiLCJ3YXJuIiwiY2FwYWJpbGl0aWVzIiwiZXh0ZW5kYWJsZVNraWxscyIsImluY2x1ZGVzIiwiYWRkIiwiZGlzY292ZXJTa2lsbHMiLCJpbnRlbnQiLCJhbGxTa2lsbHMiLCJkZXNjcmlwdGlvbiIsInRvTG93ZXJDYXNlIiwibmFtZSIsImNoZWNrU2NvcGUiLCJtZXNzYWdlIiwiaW5TY29wZSIsImF2YWlsYWJsZVNraWxscyIsImxlbmd0aCIsInJlYXNvbiIsImhhbmRsZU91dE9mU2NvcGUiLCJzdHJhdGVneSIsIm91dE9mU2NvcGVTdHJhdGVneSIsInN1Z2dlc3RlZE5leHRTdGVwcyIsImV4ZWN1dGVTa2lsbCIsInBhcmFtcyIsImNhblVzZUR5bmFtaWNTa2lsbHMiLCJhZGRlZCIsIkVycm9yIiwiYmVmb3JlU2tpbGxFeGVjdXRlIiwic2tpbGxDb250ZXh0IiwibWVtb3J5IiwiY2FsbEhpc3RvcnkiLCJza2lsbENhbGxIaXN0b3J5IiwiaGFuZGxlciIsImNhbGwiLCJzZXNzaW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsImluZGl2aWR1YWwiLCJlcnJvciIsIm1ldGFkYXRhIiwiYWZ0ZXJTa2lsbEV4ZWN1dGUiLCJleGVjdXRlU2tpbGxzIiwiY2FsbHMiLCJyZXN1bHRzIiwiZXhlY3V0ZVdvcmtmbG93Iiwid29ya2Zsb3ciLCJzdGVwIiwic3RlcHMiLCJjb25kaXRpb24iLCJvbkVycm9yIiwiUHJvbWlzZSIsInIiLCJzZXRUaW1lb3V0Iiwic3RhcnRQcm9hY3RpdmVUYXNrcyIsInByb2FjdGl2ZUVuYWJsZWQiLCJsb2ciLCJidWlsZFN5c3RlbVByb21wdCIsInByb21wdHMiLCJwcm9tcHQiLCJzeXN0ZW0iLCJwZXJzb25hbGl0eSIsImpvaW4iLCJjb25zdHJhaW50cyIsIm1hcCIsImMiLCJnZXRSZWNlbnRIaXN0b3J5IiwicmVnaXN0ZXJTa2lsbCIsImdldFJlZ2lzdGVyZWRTa2lsbHMiLCJjb25zdHJ1Y3RvciIsImNvbGxlY3RpdmUiLCJTZXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/core/base-agent.ts\n"));

/***/ })

});