(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{6754:function(e,t,n){Promise.resolve().then(n.bind(n,4996))},4996:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var a=n(7437),s=n(2265),i=n(3673),r=n(7389);class c extends r.Z{async fetchActiveEvents(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];let e=[{id:"btc-etf-flow-2024",title:"BTC ETF 本周净流入超过 $500M？",category:"crypto",volume:245e4,liquidity:89e4,outcomes:[{name:"Yes",price:.72,probability:72},{name:"No",price:.28,probability:28}],endDate:"2024-12-31",lastTradeAt:new Date().toISOString()},{id:"btc-price-100k-2024",title:"BTC 在 2024 年底前突破 $100,000？",category:"crypto",volume:128e5,liquidity:32e5,outcomes:[{name:"Yes",price:.45,probability:45},{name:"No",price:.55,probability:55}],endDate:"2024-12-31",lastTradeAt:new Date().toISOString()},{id:"fed-rate-cut-dec",title:"美联储 12 月降息？",category:"macro",volume:56e5,liquidity:18e5,outcomes:[{name:"Yes",price:.68,probability:68},{name:"No",price:.32,probability:32}],endDate:"2024-12-18",lastTradeAt:new Date().toISOString()},{id:"eth-etf-approval",title:"ETH 现货 ETF 2025 年 Q1 获批？",category:"crypto",volume:42e5,liquidity:15e5,outcomes:[{name:"Yes",price:.58,probability:58},{name:"No",price:.42,probability:42}],endDate:"2025-03-31",lastTradeAt:new Date().toISOString()}];return this.cachedEvents=e,this.lastFetchTime=new Date,e}analyzeEvent(e){let t=e.outcomes.reduce((e,t)=>e.probability>t.probability?e:t),n=Math.min(e.volume/1e7,1),a=Math.min(e.liquidity/5e6,1),s="low";e.volume>1e7?s="critical":e.volume>5e6?s="high":e.volume>1e6&&(s="medium");let i=["rising","falling","stable"],r=i[Math.floor(Math.random()*i.length)];return{eventId:e.id,eventTitle:e.title,category:e.category,topOutcome:"".concat(t.name," (").concat(t.probability,"%)"),confidence:Math.round((.6*n+.4*a)*100)/100,volume24h:e.volume,trend:r,significance:s,timestamp:new Date}}async scanCryptoRelatedEvents(){return(await this.fetchActiveEvents(20)).filter(e=>"crypto"===e.category||e.title.toLowerCase().includes("btc")||e.title.toLowerCase().includes("eth")||e.title.toLowerCase().includes("bitcoin")||e.title.toLowerCase().includes("etf")).map(e=>this.analyzeEvent(e))}async generateIntelligence(){return(await this.scanCryptoRelatedEvents()).map(e=>({id:"polymarket-".concat(e.eventId,"-").concat(Date.now()),type:"sentiment_shift",title:"预测市场: ".concat(e.eventTitle),content:this.formatAnalysisContent(e),symbol:"BTC",timestamp:e.timestamp,importance:e.significance,data:{source:"polymarket",confidence:e.confidence,topOutcome:e.topOutcome,volume24h:e.volume24h,trend:e.trend}}))}formatAnalysisContent(e){let t="rising"===e.trend?"\uD83D\uDCC8":"falling"===e.trend?"\uD83D\uDCC9":"➡️",n="⭐".repeat(Math.ceil(5*e.confidence));return"".concat(t," **").concat(e.topOutcome,"**\n")+"置信度: ".concat(n," (").concat((100*e.confidence).toFixed(0),"%)\n")+"24h 交易量: $".concat(this.formatNumber(e.volume24h))}generateSummary(e){if(0===e.length)return"暂无活跃的加密相关预测市场事件。";let t=e.filter(e=>"critical"===e.significance).length,n=e.filter(e=>"high"===e.significance).length,a="\uD83D\uDD2E **Polymarket 预测市场情报**\n\n";a+="监控到 ".concat(e.length," 个加密相关事件\n")+"\uD83D\uDD34 高重要性: ".concat(t," 个\n")+"\uD83D\uDFE0 中高重要性: ".concat(n," 个\n\n");let s=e.filter(e=>"critical"===e.significance||"high"===e.significance).slice(0,3);return s.length>0&&(a+="**重点事件:**\n",s.forEach(e=>{a+="- ".concat(e.eventTitle,"\n")+"  → ".concat(e.topOutcome,"\n")})),a}async executeTask(e){let t=e.data;switch(t.type){case"fetch_events":return await this.fetchActiveEvents(t.limit||10);case"analyze_event":{let e=(await this.fetchActiveEvents()).find(e=>e.id===t.eventId);if(!e)throw Error("未找到事件");return this.analyzeEvent(e)}case"crypto_related_scan":return await this.scanCryptoRelatedEvents();default:throw Error("未知的任务类型: ".concat(t.type))}}async generateResponse(e,t){let n=e.toLowerCase(),a=await this.scanCryptoRelatedEvents();if(n.includes("btc")||n.includes("bitcoin")){let e=a.filter(e=>e.eventTitle.toLowerCase().includes("btc")||e.eventTitle.toLowerCase().includes("bitcoin"));if(e.length>0)return this.generateSummary(e)}if(n.includes("eth")||n.includes("ethereum")){let e=a.filter(e=>e.eventTitle.toLowerCase().includes("eth"));if(e.length>0)return this.generateSummary(e)}if(n.includes("etf")){let e=a.filter(e=>e.eventTitle.toLowerCase().includes("etf"));if(e.length>0)return this.generateSummary(e)}return this.generateSummary(a)}constructor(){super({name:"Polymarket专员",role:"prediction-analyst",systemPrompt:"你是 Polymarket 预测市场分析专员，专注于监控预测市场数据。\n\n你的职责：\n1. 监控 Polymarket 上与加密货币相关的事件\n2. 分析市场预测概率变化，识别重要趋势\n3. 评估事件对加密市场的潜在影响\n4. 提供数据驱动的概率预测\n\n重点关注的事件类型：\n- ETF 批准预测\n- 监管政策变化\n- 重大技术升级（如比特币减半）\n- 宏观经济事件对加密市场的影响\n\n输出格式要求：\n- 事件名称和当前概率\n- 24小时内的概率变化\n- 交易量和流动性数据\n- 对加密市场的潜在影响评估"}),this.apiBaseUrl="https://api.polymarket.com",this.lastFetchTime=null,this.cachedEvents=[]}}let l=null;var o=n(8027);let d=[],u=[];function m(e){d.unshift(e),d.length>100&&(d=d.slice(0,100)),u.forEach(t=>{try{t(e)}catch(e){console.error("[FeedPublisher] 订阅者错误:",e)}}),console.log("[FeedPublisher] 已发布: ".concat(e.title))}async function h(){console.log("[FeedJob] 正在运行技术分析员 Feed 任务...");let e=(0,i.Od)();try{let t=await e.processTask({id:"tech-feed-".concat(Date.now()),type:"analyze_btc_doge",data:{},priority:"medium",createdAt:new Date});if(t.success&&t.data){let{analyses:e}=t.data;e.forEach(e=>{let t=e.signals[0],n=(null==t?void 0:t.confidence)>.7?"high":(null==t?void 0:t.confidence)>.5?"medium":"low",a={id:"tech-".concat(e.symbol,"-").concat(Date.now()),type:"technical_signal",title:"".concat(e.symbol," 技术分析更新"),content:"RSI: ".concat(e.indicators.rsi," | MA7: $").concat(e.indicators.ma7.toFixed(2)," | 趋势: ").concat(e.indicators.trend,"\n")+"信号: ".concat((null==t?void 0:t.description)||"暂无明确信号"),symbol:e.symbol,timestamp:new Date,importance:n,data:{source:"tech-analyst",rsi:e.indicators.rsi,ma7:e.indicators.ma7,ma14:e.indicators.ma14,trend:e.indicators.trend,signalType:null==t?void 0:t.type,signalConfidence:null==t?void 0:t.confidence}};m(a)}),console.log("[FeedJob] 技术分析员已发布 ".concat(e.length," 条情报"))}}catch(e){console.error("[FeedJob] 技术分析员任务失败:",e)}}async function p(){console.log("[FeedJob] 正在运行 Polymarket Feed 任务...");let e=(l||(l=new c),l);try{let t=await e.generateIntelligence();t.forEach(e=>{m(e)}),console.log("[FeedJob] Polymarket 已发布 ".concat(t.length," 条情报"))}catch(e){console.error("[FeedJob] Polymarket 任务失败:",e)}}async function x(){console.log("[FeedJob] 正在运行 CFO 盯盘任务...");let e=(0,o.ps)();try{let t=await e.analyzeMultiple(["BTC","DOGE"]);t.forEach(t=>{let n={id:"cfo-".concat(t.symbol,"-").concat(Date.now()),type:"cfo_analysis",title:"".concat(t.symbol," CFO 研判报告"),content:e.formatAnalysisForChat(t),symbol:t.symbol,timestamp:new Date,importance:t.consensus.confidence>.7?"high":"medium",data:{source:"cfo",bullConfidence:t.perspectives.bull.confidence,bearConfidence:t.perspectives.bear.confidence,consensusSentiment:t.consensus.sentiment,consensusAction:t.consensus.action,consensusConfidence:t.consensus.confidence}};m(n)}),console.log("[FeedJob] CFO 已发布 ".concat(t.length," 条情报"))}catch(e){console.error("[FeedJob] CFO 任务失败:",e)}}async function y(){await Promise.all([h(),p(),x()])}function g(){let[e,t]=(0,s.useState)([]),[n,i]=(0,s.useState)({}),[r,c]=(0,s.useState)(!1),l=()=>{var e;let a;t((e={limit:50,symbol:n.symbol,type:n.type},a=[...d],(null==e?void 0:e.symbol)&&(a=a.filter(t=>t.symbol===e.symbol)),(null==e?void 0:e.type)&&(a=a.filter(t=>t.type===e.type)),(null==e?void 0:e.importance)&&(a=a.filter(t=>t.importance===e.importance)),(null==e?void 0:e.limit)&&(a=a.slice(0,e.limit)),a))};(0,s.useEffect)(()=>{var e;l();let n=(e=e=>{t(t=>[e,...t].slice(0,50))},u.push(e),()=>{let t=u.indexOf(e);t>-1&&u.splice(t,1)});return()=>n()},[n]);let o=async()=>{c(!0),await y(),l(),c(!1)},m=e=>{switch(e){case"technical_signal":return"\uD83D\uDCCA";case"cfo_analysis":return"\uD83D\uDC54";case"sentiment_shift":return"\uD83D\uDD2E";case"price_alert":return"\uD83D\uDD14";default:return"\uD83D\uDCF0"}},h=e=>{switch(e){case"technical_signal":return"技术分析";case"cfo_analysis":return"CFO研判";case"sentiment_shift":return"预测市场";case"price_alert":return"价格提醒";default:return"情报"}},p=e=>{switch(e){case"critical":return"bg-red-900 text-red-400 border-red-800";case"high":return"bg-orange-900 text-orange-400 border-orange-800";case"medium":return"bg-blue-900 text-blue-400 border-blue-800";default:return"bg-gray-800 text-gray-400 border-gray-700"}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-950 text-gray-100",children:[(0,a.jsx)("header",{className:"bg-gray-900 border-b border-gray-800",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCDC"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-white",children:"Feed 情报流"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"MAS 成员实时情报"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:o,disabled:r,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 rounded-lg text-sm font-medium transition-colors",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"刷新中..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"\uD83D\uDD04"}),"立即刷新"]})}),(0,a.jsx)("a",{href:"/",className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg text-sm font-medium transition-colors",children:"返回首页"})]})]})})}),(0,a.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,a.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-800 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"标的:"}),(0,a.jsxs)("select",{value:n.symbol||"",onChange:e=>i(t=>({...t,symbol:e.target.value||void 0})),className:"bg-gray-800 border border-gray-700 rounded px-3 py-1.5 text-sm focus:outline-none focus:border-blue-500",children:[(0,a.jsx)("option",{value:"",children:"全部"}),(0,a.jsx)("option",{value:"BTC",children:"BTC"}),(0,a.jsx)("option",{value:"DOGE",children:"DOGE"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"类型:"}),(0,a.jsxs)("select",{value:n.type||"",onChange:e=>i(t=>({...t,type:e.target.value||void 0})),className:"bg-gray-800 border border-gray-700 rounded px-3 py-1.5 text-sm focus:outline-none focus:border-blue-500",children:[(0,a.jsx)("option",{value:"",children:"全部"}),(0,a.jsx)("option",{value:"technical_signal",children:"技术分析"}),(0,a.jsx)("option",{value:"cfo_analysis",children:"CFO研判"}),(0,a.jsx)("option",{value:"sentiment_shift",children:"预测市场"})]})]}),(0,a.jsx)("button",{onClick:()=>i({}),className:"ml-auto px-3 py-1.5 text-sm text-gray-400 hover:text-white transition-colors",children:"清除筛选"})]})}),(0,a.jsx)("div",{className:"space-y-4",children:e.length>0?e.map(e=>{var t;return(0,a.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4 border transition-colors hover:bg-gray-800/50 ".concat("critical"===e.importance?"border-red-800":"high"===e.importance?"border-orange-800":"border-gray-800"),children:[(0,a.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:m(e.type)}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-white",children:e.title}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs ".concat(p(e.importance)),children:h(e.type)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-1",children:[(0,a.jsx)("span",{children:e.symbol}),(0,a.jsx)("span",{children:"\xb7"}),(0,a.jsx)("span",{children:new Date(e.timestamp).toLocaleString()})]})]})]})}),(0,a.jsxs)("div",{className:"ml-11",children:[(0,a.jsx)("div",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:e.content}),e.data&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[void 0!==e.data.rsi&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-800 rounded text-xs text-gray-400",children:["RSI: ",e.data.rsi]}),void 0!==e.data.confidence&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-800 rounded text-xs text-gray-400",children:["置信度: ",(100*e.data.confidence).toFixed(0),"%"]}),void 0!==e.data.source&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-800 rounded text-xs text-gray-400",children:["来源: ",e.data.source]})]}),(null===(t=e.data)||void 0===t?void 0:t.bullConfidence)!==void 0&&(0,a.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,a.jsxs)("div",{className:"flex-1 bg-green-900/30 rounded p-2 text-center",children:[(0,a.jsx)("div",{className:"text-xs text-green-400",children:"\uD83D\uDC02 Bull"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-green-300",children:[(100*e.data.bullConfidence).toFixed(0),"%"]})]}),(0,a.jsxs)("div",{className:"flex-1 bg-red-900/30 rounded p-2 text-center",children:[(0,a.jsx)("div",{className:"text-xs text-red-400",children:"\uD83D\uDC3B Bear"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-red-300",children:[(100*e.data.bearConfidence).toFixed(0),"%"]})]})]})]})]},e.id)}):(0,a.jsxs)("div",{className:"bg-gray-900 rounded-lg p-8 border border-gray-800 text-center",children:[(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:"暂无情报数据"}),(0,a.jsx)("button",{onClick:o,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm font-medium transition-colors",children:"立即获取情报"})]})}),(0,a.jsx)("div",{className:"mt-6 text-center text-xs text-gray-500",children:(0,a.jsx)("p",{children:"数据分析员每5分钟更新 \xb7 Polymarket专员每5分钟更新 \xb7 CFO每15分钟研判"})})]})]})}}},function(e){e.O(0,[27,971,117,744],function(){return e(e.s=6754)}),_N_E=e.O()}]);