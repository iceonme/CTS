(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27],{7389:function(e,t,n){"use strict";function a(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}class s{getStatus(){return this.status}setStatus(e){this.status=e,this.onStatusChange(e)}onStatusChange(e){console.log("[".concat(this.name,"] Status changed to: ").concat(e))}addToMemory(e){let t={...e,id:a(),timestamp:new Date};this.memory.push(t),this.memory.length>this.maxMemorySize&&(this.memory=this.memory.slice(-this.maxMemorySize))}getRecentMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.memory.slice(-e)}clearMemory(){this.memory=[]}searchMemory(e){return this.memory.filter(t=>t.content.toLowerCase().includes(e.toLowerCase())||JSON.stringify(t.metadata).toLowerCase().includes(e.toLowerCase()))}async processTask(e){try{this.setStatus("analyzing"),this.addToMemory({role:"system",content:"Started task: ".concat(e.type),metadata:{taskId:e.id,taskType:e.type}});let t=Date.now(),n=await this.executeTask(e),a=Date.now()-t;return this.setStatus("completed"),this.addToMemory({role:"system",content:"Completed task: ".concat(e.type," in ").concat(a,"ms"),metadata:{taskId:e.id,duration:a}}),{success:!0,data:n}}catch(n){this.setStatus("error");let t=n instanceof Error?n.message:"Unknown error";return this.addToMemory({role:"system",content:"Task failed: ".concat(e.type," - ").concat(t),metadata:{taskId:e.id,error:t}}),{success:!1,error:t}}}async chat(e,t){this.addToMemory({role:"user",content:e,metadata:t});let n=await this.generateResponse(e,t);return this.addToMemory({role:"agent",content:n,metadata:t}),n}formatNumber(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e>=1e9?"".concat((e/1e9).toFixed(t),"B"):e>=1e6?"".concat((e/1e6).toFixed(t),"M"):e>=1e3?"".concat((e/1e3).toFixed(t),"K"):e.toFixed(t)}formatPercent(e){return"".concat(e>=0?"+":"").concat(e.toFixed(2),"%")}delay(e){return new Promise(t=>setTimeout(t,e))}getInfo(){return{id:this.id,name:this.name,role:this.role,status:this.status,memorySize:this.memory.length}}constructor(e){this.status="idle",this.memory=[],this.maxMemorySize=50,this.id=a(),this.name=e.name,this.role=e.role,this.systemPrompt=e.systemPrompt}}t.Z=s},8027:function(e,t,n){"use strict";n.d(t,{ps:function(){return u}});var a=n(7389),s=n(3673);class i{generateReasoning(){var e,t;let{technicalAnalysis:n}=this.context,{indicators:a,signals:s}=n,i=[],o=50;if(a.rsi<35?(i.push("RSI at ".concat(a.rsi," indicates oversold conditions - potential bounce incoming")),o+=15):a.rsi>=50&&a.rsi<65&&(i.push("RSI at ".concat(a.rsi," shows healthy momentum with room to grow")),o+=8),"up"===a.trend&&(i.push("Price is in an uptrend with MA7 above MA14 - bullish momentum"),o+=12),a.support){let e=(null===(t=n.signals[0])||void 0===t?void 0:t.description.includes("price above"))?1.02*a.ma7:a.ma7;(e-a.support)/e*100<5&&(i.push("Price is near support at $".concat(a.support," - good risk/reward entry")),o+=10)}a.volatility<5&&(i.push("Low volatility (".concat(a.volatility,"%) suggests consolidation before potential breakout")),o+=5);let r=s.filter(e=>"buy"===e.type||"strong_buy"===e.type);if(r.length>0&&(i.push("".concat(r.length," bullish signal(s) detected: ").concat(r[0].description)),o+=5*r.length),(null===(e=this.context.historicalContext)||void 0===e?void 0:e.priceChange24h)!==void 0){let e=this.context.historicalContext.priceChange24h;e>5?(i.push("Strong 24h performance (+".concat(e.toFixed(2),"%) indicates positive momentum")),o+=8):e>0&&e<3&&(i.push("Steady 24h gain (+".concat(e.toFixed(2),"%) shows sustainable growth")),o+=4)}return 0===i.length&&(i.push("Market structure remains intact - dip buying opportunity"),o=40),{points:i,confidence:Math.min(o,95)/100}}constructor(e){this.context=e}}class o{generateReasoning(){var e;let{technicalAnalysis:t}=this.context,{indicators:n,signals:a}=t,s=[],i=50;if(n.rsi>70?(s.push("RSI at ".concat(n.rsi," indicates overbought conditions - correction likely")),i+=20):n.rsi>60&&n.rsi<=70&&(s.push("RSI at ".concat(n.rsi," approaching overbought territory")),i+=8),"down"===n.trend&&(s.push("Price is in a downtrend with MA7 below MA14 - bearish momentum"),i+=15),n.resistance){let e=n.ma7;(n.resistance-e)/e*100<5&&(s.push("Price approaching resistance at $".concat(n.resistance," - limited upside")),i+=10)}n.volatility>10&&(s.push("High volatility (".concat(n.volatility,"%) increases downside risk")),i+=8);let o=a.filter(e=>"sell"===e.type||"strong_sell"===e.type);if(o.length>0&&(s.push("".concat(o.length," bearish signal(s) detected: ").concat(o[0].description)),i+=6*o.length),(null===(e=this.context.historicalContext)||void 0===e?void 0:e.priceChange24h)!==void 0){let e=this.context.historicalContext.priceChange24h;e<-5?(s.push("Sharp 24h decline (".concat(e.toFixed(2),"%) indicates selling pressure")),i+=12):e<-2&&(s.push("Negative 24h performance (".concat(e.toFixed(2),"%) shows weakness")),i+=6)}return 0===s.length&&(s.push("Market showing early signs of exhaustion - caution warranted"),i=35),{points:s,confidence:Math.min(i,95)/100}}constructor(e){this.context=e}}class r{analyze(){let e=this.bullReasoner.generateReasoning(),t=this.bearReasoner.generateReasoning(),n={mode:"bull",confidence:e.confidence,reasoning:e.points.join("; "),keyPoints:e.points,riskLevel:this.calculateRiskLevel("bull",e.confidence)},a={mode:"bear",confidence:t.confidence,reasoning:t.points.join("; "),keyPoints:t.points,riskLevel:this.calculateRiskLevel("bear",t.confidence)},s=this.generateConsensus(n,a);return{bull:n,bear:a,consensus:s}}calculateRiskLevel(e,t){return t>.75?"high":t>.5?"medium":"low"}generateConsensus(e,t){let n,a,s;let i=e.confidence,o=t.confidence,r=Math.abs(i-o);return r<.15?(n="neutral",a="watch",s="Market is at equilibrium. Both bullish and bearish cases have merit. Best to observe and wait for clearer signals."):i>o?(n="bullish",r>.3&&i>.7?(a="buy",s="Strong bullish case with ".concat((100*i).toFixed(0),"% confidence. ").concat(e.keyPoints[0])):(a="hold",s="Moderately bullish outlook. ".concat(e.keyPoints[0]," However, bearish factors warrant caution."))):(n="bearish",r>.3&&o>.7?(a="sell",s="Strong bearish case with ".concat((100*o).toFixed(0),"% confidence. ").concat(t.keyPoints[0])):(a="hold",s="Moderately bearish outlook. ".concat(t.keyPoints[0]," Consider reducing exposure or waiting for better entry."))),{sentiment:n,confidence:r,summary:s,action:a}}constructor(e){this.bullReasoner=new i(e),this.bearReasoner=new o(e)}}class c extends a.Z{async analyzeSymbol(e){let t={id:"cfo-task-".concat(Date.now()),type:"analyze_symbol",data:{symbol:e},priority:"high",createdAt:new Date},n=await this.techAnalyst.processTask(t);if(!n.success||!n.data)throw Error(n.error||"Technical analysis failed");let a=function(e,t){let n=new r({technicalAnalysis:e,marketContext:void 0,historicalContext:void 0}).analyze();return{id:"cfo-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),symbol:e.symbol,timestamp:new Date,perspectives:{bull:n.bull,bear:n.bear},consensus:n.consensus,technicalData:e}}(n.data);return this.cacheAnalysis(a),a}async analyzeMultiple(e){let t=[];for(let n of e){try{let e=await this.analyzeSymbol(n);t.push(e)}catch(e){console.error("[CFO] 分析 ".concat(n," 失败:"),e),t.push(this.createErrorAnalysis(n,e instanceof Error?e.message:"未知错误"))}await this.delay(1300)}return t}createErrorAnalysis(e,t){let n=new Date;return{id:"cfo-error-".concat(Date.now(),"-").concat(e),symbol:e,timestamp:n,perspectives:{bull:{mode:"bull",confidence:0,reasoning:"数据暂时不可用",keyPoints:["无法获取市场数据，请稍后重试"],riskLevel:"medium"},bear:{mode:"bear",confidence:0,reasoning:"数据暂时不可用",keyPoints:[t.includes("429")?"API 限速，请稍后再试":"网络连接问题"],riskLevel:"medium"}},consensus:{sentiment:"neutral",confidence:0,summary:t.includes("429")?"API 请求过于频繁，请稍后重试":"数据加载失败，请刷新页面重试",action:"watch"},technicalData:{symbol:e,indicators:{rsi:50,ma7:0,ma14:0,volatility:0,trend:"sideways"},signals:[],timestamp:n}}}async getMarketOverview(){let e,t;let n=await this.analyzeMultiple(["BTC","ETH","DOGE","SOL"]),a=0,s=0,i=0,o=0,r=[],c=[];for(let e of n){if(0===e.consensus.confidence&&0===e.perspectives.bull.confidence){o++;continue}switch(e.consensus.sentiment){case"bullish":a++,e.consensus.confidence>.6&&r.push(e.symbol);break;case"bearish":s++,e.consensus.confidence>.6&&c.push(e.symbol);break;case"neutral":i++}}let l=n.length-o;return 0===l?(e="neutral",t="数据加载失败，请稍后刷新页面重试。"):a>s&&a>i?(e="bullish",t="市场呈现看涨势头，".concat(a,"/").concat(l," 个资产呈积极态势。")):s>a&&s>i?(e="bearish",t="市场承压，".concat(s,"/").concat(l," 个资产呈消极态势。")):(e="neutral",t="市场信号混杂，".concat(i,"/").concat(l," 个资产呈中性态势。")),{analyses:n,overallSentiment:e,topOpportunities:r.slice(0,3),topRisks:c.slice(0,3),summary:t}}generateInsights(e){let t=[];for(let n of e){let{symbol:e,consensus:a,perspectives:s}=n;a.confidence>.7&&t.push({type:"bullish"===a.sentiment?"opportunity":"warning",title:"".concat(e," ").concat("bullish"===a.sentiment?"Opportunity":"Risk Alert"),content:a.summary,confidence:a.confidence,relatedSymbols:[e],timestamp:new Date});let i=s.bull.confidence,o=s.bear.confidence;.2>Math.abs(i-o)&&i>.4&&o>.4&&t.push({type:"market_outlook",title:"".concat(e," at Critical Juncture"),content:"Bull case (".concat((100*i).toFixed(0),"% confidence) vs Bear case (").concat((100*o).toFixed(0),"% confidence). Market direction unclear."),confidence:.5,relatedSymbols:[e],timestamp:new Date})}return t.sort((e,t)=>t.confidence-e.confidence)}formatAnalysisForChat(e){let{symbol:t,consensus:n,perspectives:a,technicalData:s}=e;if(0===e.consensus.confidence&&0===e.perspectives.bull.confidence)return"\uD83D\uDCCA **".concat(t," 分析报告**\n\n").concat(e.consensus.summary);let i="\uD83D\uDCCA **".concat(t," 分析报告**\n\n");i+="**技术指标：**\n"+"- RSI: ".concat(s.indicators.rsi,"\n")+"- MA7: $".concat(s.indicators.ma7.toLocaleString(),"\n")+"- MA14: $".concat(s.indicators.ma14.toLocaleString(),"\n")+"- 趋势: ".concat("up"===s.indicators.trend?"上涨":"down"===s.indicators.trend?"下跌":"横盘","\n\n")+"\uD83D\uDC02 **看涨观点** (".concat((100*a.bull.confidence).toFixed(0),"% 置信度)\n"),a.bull.keyPoints.slice(0,2).forEach(e=>{i+="- ".concat(e,"\n")}),i+="\n"+"\uD83D\uDC3B **看跌观点** (".concat((100*a.bear.confidence).toFixed(0),"% 置信度)\n"),a.bear.keyPoints.slice(0,2).forEach(e=>{i+="- ".concat(e,"\n")}),i+="\n";let o="buy"===n.action?"\uD83D\uDFE2":"sell"===n.action?"\uD83D\uDD34":"\uD83D\uDFE1",r="buy"===n.action?"买入":"sell"===n.action?"卖出":"watch"===n.action?"观望":"持有";return i+="".concat(o," **CFO 建议: ").concat(r,"**\n")+"置信度: ".concat((100*n.confidence).toFixed(0),"% | 情绪: ").concat("bullish"===n.sentiment?"看涨":"bearish"===n.sentiment?"看跌":"中性","\n")+"> ".concat(n.summary)}formatMarketOverview(e){let t="\uD83C\uDF0D **市场概览**\n\n",n="bullish"===e.overallSentiment?"看涨":"bearish"===e.overallSentiment?"看跌":"中性";for(let a of(t+="**整体情绪：** ".concat(n,"\n")+"".concat(e.summary,"\n\n"),e.topOpportunities.length>0&&(t+="\uD83D\uDFE2 **机会：** ".concat(e.topOpportunities.join(", "),"\n")),e.topRisks.length>0&&(t+="\uD83D\uDD34 **风险：** ".concat(e.topRisks.join(", "),"\n")),t+="\n**资产摘要：**\n",e.analyses)){let e="bullish"===a.consensus.sentiment?"\uD83D\uDFE2":"bearish"===a.consensus.sentiment?"\uD83D\uDD34":"⚪",n="buy"===a.consensus.action?"买入":"sell"===a.consensus.action?"卖出":"watch"===a.consensus.action?"观望":"持有";t+="".concat(e," ").concat(a.symbol,": ").concat(n," (").concat((100*a.consensus.confidence).toFixed(0),"%)\n")}return t}cacheAnalysis(e){if(this.recentAnalyses.set(e.symbol,e),this.recentAnalyses.size>this.maxCacheSize){let e=this.recentAnalyses.keys().next().value;e&&this.recentAnalyses.delete(e)}}getCachedAnalysis(e){return this.recentAnalyses.get(e)}getAllCachedAnalyses(){return Array.from(this.recentAnalyses.values())}async executeTask(e){let t=e.data;switch(t.type){case"single_analysis":if(!t.symbol)throw Error("Symbol required for single analysis");return await this.analyzeSymbol(t.symbol);case"market_overview":return await this.getMarketOverview();case"portfolio_review":{var n;let e=(null===(n=t.portfolio)||void 0===n?void 0:n.map(e=>e.symbol))||["BTC","ETH"];return await this.analyzeMultiple(e)}default:throw Error("Unknown CFO task type: ".concat(t.type))}}async generateResponse(e,t){let n=e.toLowerCase();if(n.includes("overview")||n.includes("market")||n.includes("概览")||n.includes("市场"))try{let e=await this.getMarketOverview();return this.formatMarketOverview(e)}catch(e){return"获取市场概览时遇到问题，请稍后再试。"}let a=e.match(/\b(BTC|DOGE|ETH|SOL|XRP|ADA|AVAX|DOT)\b/i);if(a){let e=a[0].toUpperCase();try{let t=this.getCachedAnalysis(e);if(t&&Date.now()-t.timestamp.getTime()<3e5)return this.formatAnalysisForChat(t)+"\n\n*(缓存数据)*";let n=await this.analyzeSymbol(e);return this.formatAnalysisForChat(n)}catch(t){if((t instanceof Error?t.message:"").includes("429"))return"⏳ API 请求过于频繁，请等待 1-2 分钟后再试。";return"暂时无法分析 ".concat(e,"，市场数据可能暂时不可用。")}}return'我是你的 CFO 智能助手，可以帮你：\n\n\uD83D\uDCCA **市场分析** - 询问 BTC、DOGE、ETH 等币种\n\uD83C\uDF0D **市场概览** - 输入"市场概览"查看整体市场状况\n\uD83D\uDCA1 **投资建议** - 提供买入/卖出/持有建议\n\n你想分析什么？'}constructor(){super({name:"CFO",role:"cfo",systemPrompt:"You are the Chief Financial Officer (CFO) of CryptoPulse AI.\nYour role is to:\n1. Oversee all market analysis and make strategic decisions\n2. Evaluate both bullish and bearish perspectives using dual-reasoning\n3. Provide clear buy/sell/hold recommendations with confidence levels\n4. Assess portfolio risk and market opportunities\n5. Communicate in a professional, concise manner\n\nAlways present both sides of the argument (Bull vs Bear) before giving your final verdict.\nBe data-driven and quantitative in your analysis."}),this.recentAnalyses=new Map,this.maxCacheSize=20,this.techAnalyst=(0,s.Od)()}}let l=null;function u(){return l||(l=new c),l}},3673:function(e,t,n){"use strict";n.d(t,{Od:function(){return p}});var a=n(7389),s=n(257);s.env.HTTPS_PROXY||s.env.https_proxy;class i extends Error{constructor(e,t,n){super(e),this.statusCode=t,this.response=n,this.name="CoinGeckoError"}}class o{async add(e){return new Promise((t,n)=>{this.queue.push(async()=>{try{let n=Date.now(),a=Math.max(0,this.minInterval-(n-this.lastRequestTime));a>0&&await new Promise(e=>setTimeout(e,a)),this.lastRequestTime=Date.now();let s=await e();t(s)}catch(e){n(e)}}),this.processing||this.processQueue()})}async processQueue(){for(this.processing=!0;this.queue.length>0;){let e=this.queue.shift();e&&await e()}this.processing=!1}constructor(){this.queue=[],this.processing=!1,this.lastRequestTime=0,this.minInterval=1200}}let r=new o;async function c(){return fetch}async function l(e,t){return r.add(async()=>{let n=null;for(let a=0;a<3;a++)try{if(a>0){let e=2e3*Math.pow(2,a-1);console.log("[CoinGecko] 重试 ".concat(a+1,"/").concat(3,"，等待 ").concat(e,"ms...")),await new Promise(t=>setTimeout(t,e))}let s=new URL("".concat("https://api.coingecko.com/api/v3").concat(e));t&&Object.entries(t).forEach(e=>{let[t,n]=e;s.searchParams.append(t,n)});let o={headers:{Accept:"application/json"}},r=await c(),l=await r(s.toString(),o);if(!l.ok){if(429===l.status){n=new i("API 限速，稍等重试",429);continue}let e=await l.text();throw new i("CoinGecko API error: ".concat(l.status," - ").concat(e),l.status)}return await l.json()}catch(e){if(e instanceof i&&429===e.statusCode){n=e;continue}throw e}throw n||new i("请求失败，请稍后再试")})}async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"7",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"usd";return l("/coins/".concat(e,"/market_chart"),{vs_currency:n,days:t})}class h extends a.Z{calculateRSI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;if(e.length<t+1)throw Error("Need at least ".concat(t+1," price points for RSI calculation"));let n=0,a=0;for(let s=1;s<=t;s++){let t=e[s]-e[s-1];t>0?n+=t:a+=Math.abs(t)}let s=n/t,i=a/t;for(let n=t+1;n<e.length;n++){let a=e[n]-e[n-1],o=a>0?a:0,r=a<0?Math.abs(a):0;s=(s*(t-1)+o)/t,i=(i*(t-1)+r)/t}return 0===i?100:Math.round(100*(100-100/(1+s/i)))/100}calculateSMA(e,t){if(e.length<t)throw Error("Need at least ".concat(t," price points for SMA calculation"));return Math.round(e.slice(-t).reduce((e,t)=>e+t,0)/t*100)/100}calculateEMA(e,t){if(e.length<t)throw Error("Need at least ".concat(t," price points for EMA calculation"));let n=2/(t+1),a=e.slice(0,t).reduce((e,t)=>e+t,0)/t;for(let s=t;s<e.length;s++)a=(e[s]-a)*n+a;return Math.round(100*a)/100}calculateVolatility(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;if(e.length<t)return 0;let n=e.slice(-t),a=n.reduce((e,t)=>e+t,0)/t;return Math.round(Math.sqrt(n.map(e=>Math.pow(e-a,2)).reduce((e,t)=>e+t,0)/t)/a*1e4)/100}identifyTrend(e){if(e.length<14)return"sideways";let t=this.calculateSMA(e,7),n=this.calculateSMA(e,14),a=e[e.length-1],s=a>t,i=a>n,o=t>n;return s&&i&&o?"up":s||i||o?"sideways":"down"}calculateSupportResistance(e){let t=e.slice(-30),n=Math.min(...t),a=Math.max(...t);return{support:n=Math.round(99.5*n)/100,resistance:a=Math.round(1.005*a*100)/100}}generateSignals(e,t,n){let a=[];t.rsi>70?a.push({type:"sell",indicator:"RSI",confidence:Math.min((t.rsi-70)/30,1),description:"".concat(e," RSI 超买 (").concat(t.rsi,")")}):t.rsi<30&&a.push({type:"buy",indicator:"RSI",confidence:Math.min((30-t.rsi)/30,1),description:"".concat(e," RSI 超卖 (").concat(t.rsi,")")});let s=n[n.length-1];return s>t.ma7&&t.ma7>t.ma14?a.push({type:"buy",indicator:"MA 趋势",confidence:.7,description:"".concat(e," 价格在 MA7 之上，MA7 在 MA14 之上 - 看涨趋势")}):s<t.ma7&&t.ma7<t.ma14&&a.push({type:"sell",indicator:"MA 趋势",confidence:.7,description:"".concat(e," 价格在 MA7 之下，MA7 在 MA14 之下 - 看跌趋势")}),"up"===t.trend?a.push({type:"buy",indicator:"趋势",confidence:.6,description:"".concat(e," 处于上涨趋势")}):"down"===t.trend&&a.push({type:"sell",indicator:"趋势",confidence:.6,description:"".concat(e," 处于下跌趋势")}),0===a.length&&a.push({type:"neutral",indicator:"综合",confidence:.5,description:"".concat(e," 信号混杂，方向不明")}),a}calculateCompositeScore(e){let t;return t=50+(50-e.rsi)*.4,"up"===e.trend&&(t+=15),"down"===e.trend&&(t-=15),Math.max(0,Math.min(100,Math.round(t-=.2*e.volatility)))}async analyzeSymbol(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"14",a=t||this.coinIdMap[e.toUpperCase()];if(!a)throw Error("Unknown symbol: ".concat(e));let s=(await u(a,n)).prices.map(e=>e[1]);if(s.length<14)throw Error("Insufficient data points for ".concat(e));let i=this.calculateRSI(s),o=this.calculateSMA(s,7),r=this.calculateSMA(s,14),c=s.length>=30?this.calculateSMA(s,30):void 0,l=this.calculateVolatility(s),h=this.identifyTrend(s),{support:d,resistance:p}=this.calculateSupportResistance(s),m={rsi:i,ma7:o,ma14:r,ma30:c,volatility:l,trend:h,support:d,resistance:p},y=this.generateSignals(e,m,s);return{symbol:e.toUpperCase(),indicators:m,signals:y,timestamp:new Date}}async analyzeMultiple(e){let t=[];for(let n of e){try{let e=await this.analyzeSymbol(n);t.push(e)}catch(e){console.error("[TechAnalyst] Failed to analyze ".concat(n,":"),e)}await this.delay(500)}return{analyses:t,timestamp:new Date}}async analyzeBTCAndDOGE(){return this.analyzeMultiple(["BTC","DOGE"])}generateSummary(e){let{symbol:t,indicators:n,signals:a}=e,s=this.calculateCompositeScore(n),i=a.filter(e=>"buy"===e.type||"strong_buy"===e.type),o=a.filter(e=>"sell"===e.type||"strong_sell"===e.type),r="up"===n.trend?"上涨":"down"===n.trend?"下跌":"横盘",c="[".concat(t,"] 技术评分: ").concat(s,"/100\n");return c+="RSI: ".concat(n.rsi," | MA7: $").concat(n.ma7," | MA14: $").concat(n.ma14,"\n")+"趋势: ".concat(r," | 波动率: ").concat(n.volatility,"%\n")+"信号: ".concat(i.length," 个看涨, ").concat(o.length," 个看跌\n"),a.length>0&&(c+="主要信号: ".concat(a[0].description)),c}async executeTask(e){switch(e.type){case"analyze_symbol":{let{symbol:t,coinId:n,days:a}=e.data;return await this.analyzeSymbol(t,n,a)}case"analyze_multiple":{let{symbols:t}=e.data;return await this.analyzeMultiple(t)}case"analyze_btc_doge":return await this.analyzeBTCAndDOGE();default:throw Error("Unknown task type: ".concat(e.type))}}async generateResponse(e,t){if(e.toLowerCase().includes("analyze")||e.toLowerCase().includes("分析")){var n;let t=(null===(n=e.match(/\b(BTC|DOGE|ETH|SOL|XRP|ADA)\b/i))||void 0===n?void 0:n[0])||"BTC";try{let e=await this.analyzeSymbol(t);return this.generateSummary(e)}catch(e){if((e instanceof Error?e.message:"").includes("429"))return"⏳ API 请求过于频繁，请等待 1-2 分钟后再试。";return"抱歉，暂时无法分析 ".concat(t,"。请稍后再试。")}}return"我是技术分析员，可以帮你分析加密货币的技术指标。让我分析 BTC、DOGE 或其他支持的币种。"}constructor(){super({name:"TechAnalyst",role:"tech-analyst",systemPrompt:"You are an expert Technical Analyst specializing in cryptocurrency markets.\nYour role is to:\n1. Calculate and analyze technical indicators (RSI, MA, Volatility)\n2. Identify trends, support/resistance levels\n3. Generate buy/sell/neutral signals based on technical analysis\n4. Provide clear, data-driven insights\n\nAlways be precise with numbers and explain your reasoning clearly."}),this.coinIdMap={BTC:"bitcoin",DOGE:"dogecoin",ETH:"ethereum",SOL:"solana",XRP:"ripple",ADA:"cardano",AVAX:"avalanche-2",DOT:"polkadot"}}}let d=null;function p(){return d||(d=new h),d}},257:function(e,t,n){"use strict";var a,s;e.exports=(null==(a=n.g.process)?void 0:a.env)&&"object"==typeof(null==(s=n.g.process)?void 0:s.env)?n.g.process:n(4227)},4227:function(e){!function(){var t={229:function(e){var t,n,a,s=e.exports={};function i(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function r(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var c=[],l=!1,u=-1;function h(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&d())}function d(){if(!l){var e=r(h);l=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||r(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},n={};function a(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={exports:{}},o=!0;try{t[e](i,i.exports,a),o=!1}finally{o&&delete n[e]}return i.exports}a.ab="//";var s=a(229);e.exports=s}()}}]);