# TradeMind 产品路线图

> 版本规划与需求文档

**最后更新**: 2026-02-18  
**关联**: [VISION.md](./VISION.md) | [HANDOVER.md](./HANDOVER.md)

---

## 版本概览

| 版本 | 名称 | 目标 | 状态 |
|------|------|------|------|
| **v0.1** | 挑战赛 | 验证 MAS 架构，发现最优策略 | 🚧 进行中 |
| **v0.5** | 个人助手 | 基础个人助手功能 | 📋 规划 |
| **v1.0** | 正式版 | 可信任的 AI 交易助手 | 📋 规划 |
| **v2.0** | 网络版 | Agent 协作与策略市场 | 📋 规划 |

---

## v0.1 挑战赛版本（当前进行中）

### 目标
构建交易挑战赛平台，让不同类型"交易者"在**相同历史数据**上竞技，验证 MAS 架构有效性，发现最优策略组合。

> 💡 **为什么是挑战赛？**  
> 这是通往最终愿景（个人 AI 交易助手）的第一步。通过挑战赛我们可以：
> 1. **验证 MAS 协作效率**：测试“信息层 Feed 协作”是否比“LLM 直接工具调用”更高效、更准。
> 2. 发现什么样的策略组合最有效
> 3. 积累历史回测数据，训练更好的 Agent
> 4. 为后续产品提供可信的"策略库"

### 核心需求

#### 1. 参赛者系统
**需求**: 支持多种类型的交易参与者同台竞技

| 参赛者 | 优先级 | 说明 |
|--------|--------|------|
| **DCA 定投选手** | P0 | ✅ 已实现 |
| **MAS 小队** | P0 | ✅ 基础框架已建立 |
| **LLM 单兵** | P1 | ✅ 已实现，待进一步增强 |
| **自定义 MAS** | P2 | 📋 待开发 |

**验收标准**:
- [x] 定义统一的 `Contestant` 接口
- [x] 参赛者可以独立初始化、接收行情、返回交易决策
- [x] 参赛者之间互不干扰，公平竞技

#### 2. 数据回放引擎
**需求**: 基于历史数据回放，模拟真实市场环境

**已有基础**: `lib/core/replay-engine.ts`（基础实现）

**需完善**:
- [x] 支持 2025 全年 BTC 1分钟数据回放
- [x] 动态频率图表同步渲染
- [x] 完善 VirtualClock 注入机制

... (中间略) ...

### 里程碑（4周）

| 周 | 目标 | 交付物 | 状态 |
|----|------|--------|------|
| W1 | 参赛者框架 | Contestant 接口 + DCA 选手 + 基础比赛控制器 | ✅ 已超前完成 |
| W2 | LLM 调优 | LLM 三变体 + 分析层 Tools + 24h 指标历史 + Arena 集成 | ✅ 已完成 |
| W3 | MAS 深度运转 | 技术分析员信号生成 + PA 决策 + 交易执行 | 📋 计划 |
| W4 | 可视化与报告 | 资产曲线指标分析 + 最终评估报告 | 📋 计划 |

---

## 需求变更记录

| 日期 | 变更 | 说明 |
|------|------|------|
| 2026-02-18 | 创建 v0.1 挑战赛版本 | 调整 Phase 1 方向，先通过挑战赛验证架构有效性 |
| 2026-02-20 | LLM 成本与数据优化 | 由于 1m 数据量巨大，引入 CSV 压缩与手动小时线聚合采样 |
| 2026-02-20 | W2 完成 | LLM 三变体系统 + 分析层 Tools + 24h 指标历史 + 日志增强 |

#### 3. MAS 小队运转
**需求**: 完整的盯盘 → 研判 → 交易流程

**盯盘模块** (技术分析员):
- [x] 计算基础指标（RSI, MA, MACD）- 通过 analysis-tools.ts 实现
- [x] 识别交易信号（超买超卖、金叉死叉、背离）- LLM Indicator/Strategy 已支持
- [ ] 生成预测（"预计 24h 内回调 3-5%"）
- [ ] 基于记忆避免重复发信号

**研判模块** (PA):
- [ ] 收集技术分析员的信号
- [ ] 实现加权决策算法
- [ ] 生成交易指令（买/卖/持仓、数量、理由）
- [ ] 记录决策理由

**交易模块**:
- [ ] 模拟执行交易
- [ ] 更新持仓和资金
- [ ] 记录交易历史

#### 4. 评估系统
**需求**: 公平评估各参赛者表现

| 指标 | 说明 |
|------|------|
| 总收益率 | (期末资产 - 初始资金) / 初始资金 |
| 年化收益率 | 根据比赛时长年化 |
| 夏普比率 | 风险调整收益 |
| 最大回撤 | 从高点到低点的最大跌幅 |
| 胜率 | 盈利交易次数 / 总交易次数 |
| 盈亏比 | 平均盈利 / 平均亏损 |
| 交易频率 | 交易次数 / 比赛天数 |

**验收标准**:
- [ ] 实时计算各参赛者资产曲线
- [ ] 生成对比报告
- [ ] 支持多维度排名

#### 5. 可视化界面
**需求**: 直观展示比赛过程和结果

**验收标准**:
- [ ] 资产曲线对比图（多参赛者叠加）
- [ ] 实时排行榜
- [ ] 交易记录时间线
- [ ] 关键指标仪表盘

### 技术需求

- **数据**: DuckDB 行情数据（已有 ✅）
- **回放**: ReplayEngine（已有 ✅，需完善）
- **框架**: TradeMind Framework（已有 ✅）
- **前端**: Next.js + Lightweight Charts

### 里程碑（4周）

| 周 | 目标 | 交付物 |
|----|------|--------|
| W1 | 参赛者框架 | Contestant 接口 + DCA 选手 + 基础比赛控制器 |
| W2 | MAS 运转 | 技术分析员信号生成 + PA 决策 + 交易执行 |
| W3 | 评估系统 | 指标计算 + LLM 单兵 + 评估报告 |
| W4 | 可视化 | 资产曲线 + 排行榜 + 完整比赛流程 |

---

## v0.5 个人助手版本（规划）

### 目标
将挑战赛验证成功的 MAS 系统，封装为服务个人投资者的基础产品。

### 核心需求

#### 1. 用户系统
- [ ] 注册/登录
- [ ] 风险偏好问卷
- [ ] 投资目标设置

#### 2. Agent 配置
- [ ] 选择 Agent 类型（技术分析、宏观分析等）
- [ ] 配置 Agent 参数（敏感程度、交易频率）
- [ ] 模拟模式 vs 提醒模式

#### 3. 实时盯盘
- [ ] 连接实时数据源
- [ ] 主动推送重要信号
- [ ] 自然语言对话交互

#### 4. 模拟交易
- [ ] 虚拟资金练习
- [ ] 策略回测
- [ ] 业绩追踪

---

## v1.0 正式版（规划）

### 目标
可信任的 AI 交易助手，支持分级自动化。

### 核心需求

#### 1. 风控系统
- [ ] 止损/止盈自动执行
- [ ] 仓位管理
- [ ] 黑天鹅保护

#### 2. 策略市场
- [ ] 分享 Agent 配置
- [ ] 购买优秀策略
- [ ] 业绩透明展示

#### 3. 分级授权
- [ ] 建议模式：只给建议，不执行
- [ ] 半自动：用户确认后执行
- [ ] 全自动：完全托管（限额内）

---

## v2.0 网络版（规划）

### 目标
Agent 协作网络，集体智慧。

### 核心需求

#### 1. Agent 协作
- [ ] Agent 之间可以讨论
- [ ] 投票机制
- [ ] 共识生成

#### 2. Agent 经济
- [ ] Agent 可以被雇佣/解雇
- [ ] Agent 开发者获得收益分成
- [ ] Agent 声誉系统

#### 3. 社交功能
- [ ] 关注优秀交易者
- [ ] 复制策略
- [ ] 社区讨论

---

## 需求变更记录

| 日期 | 变更 | 说明 |
|------|------|------|
| 2026-02-18 | 创建 v0.1 挑战赛版本 | 调整 Phase 1 方向，先通过挑战赛验证架构有效性 |

---

## 相关文档

- **产品愿景**: [VISION.md](./VISION.md)
- **工作日志**: [HANDOVER.md](./HANDOVER.md)
- **技术架构**: [architecture/](./architecture/)
